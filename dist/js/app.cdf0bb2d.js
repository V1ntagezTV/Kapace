(function(){var e={5358:function(e,t,a){var l={"./af":2190,"./af.js":2190,"./ar":7218,"./ar-dz":5785,"./ar-dz.js":5785,"./ar-kw":9417,"./ar-kw.js":9417,"./ar-ly":6904,"./ar-ly.js":6904,"./ar-ma":8617,"./ar-ma.js":8617,"./ar-ps":1318,"./ar-ps.js":1318,"./ar-sa":2699,"./ar-sa.js":2699,"./ar-tn":6789,"./ar-tn.js":6789,"./ar.js":7218,"./az":3050,"./az.js":3050,"./be":8316,"./be.js":8316,"./bg":310,"./bg.js":310,"./bm":8884,"./bm.js":8884,"./bn":3469,"./bn-bd":6672,"./bn-bd.js":6672,"./bn.js":3469,"./bo":9118,"./bo.js":9118,"./br":3113,"./br.js":3113,"./bs":3626,"./bs.js":3626,"./ca":921,"./ca.js":921,"./cs":7799,"./cs.js":7799,"./cv":2828,"./cv.js":2828,"./cy":3521,"./cy.js":3521,"./da":6962,"./da.js":6962,"./de":3294,"./de-at":6158,"./de-at.js":6158,"./de-ch":5960,"./de-ch.js":5960,"./de.js":3294,"./dv":7963,"./dv.js":7963,"./el":3432,"./el.js":3432,"./en-au":998,"./en-au.js":998,"./en-ca":5931,"./en-ca.js":5931,"./en-gb":5930,"./en-gb.js":5930,"./en-ie":8081,"./en-ie.js":8081,"./en-il":1594,"./en-il.js":1594,"./en-in":3904,"./en-in.js":3904,"./en-nz":1507,"./en-nz.js":1507,"./en-sg":9409,"./en-sg.js":9409,"./eo":2177,"./eo.js":2177,"./es":4805,"./es-do":9155,"./es-do.js":9155,"./es-mx":9791,"./es-mx.js":9791,"./es-us":6098,"./es-us.js":6098,"./es.js":4805,"./et":6240,"./et.js":6240,"./eu":391,"./eu.js":391,"./fa":612,"./fa.js":612,"./fi":4220,"./fi.js":4220,"./fil":5570,"./fil.js":5570,"./fo":5466,"./fo.js":5466,"./fr":4461,"./fr-ca":6306,"./fr-ca.js":6306,"./fr-ch":7081,"./fr-ch.js":7081,"./fr.js":4461,"./fy":3484,"./fy.js":3484,"./ga":6957,"./ga.js":6957,"./gd":2978,"./gd.js":2978,"./gl":9866,"./gl.js":9866,"./gom-deva":5011,"./gom-deva.js":5011,"./gom-latn":4724,"./gom-latn.js":4724,"./gu":1601,"./gu.js":1601,"./he":9802,"./he.js":9802,"./hi":9358,"./hi.js":9358,"./hr":3907,"./hr.js":3907,"./hu":218,"./hu.js":218,"./hy-am":533,"./hy-am.js":533,"./id":2844,"./id.js":2844,"./is":7353,"./is.js":7353,"./it":6364,"./it-ch":774,"./it-ch.js":774,"./it.js":6364,"./ja":6008,"./ja.js":6008,"./jv":8221,"./jv.js":8221,"./ka":2417,"./ka.js":2417,"./kk":2071,"./kk.js":2071,"./km":6149,"./km.js":6149,"./kn":4572,"./kn.js":4572,"./ko":659,"./ko.js":659,"./ku":6285,"./ku-kmr":9398,"./ku-kmr.js":9398,"./ku.js":6285,"./ky":1609,"./ky.js":1609,"./lb":119,"./lb.js":119,"./lo":1748,"./lo.js":1748,"./lt":1973,"./lt.js":1973,"./lv":1347,"./lv.js":1347,"./me":3023,"./me.js":3023,"./mi":5747,"./mi.js":5747,"./mk":4341,"./mk.js":4341,"./ml":3840,"./ml.js":3840,"./mn":2058,"./mn.js":2058,"./mr":9182,"./mr.js":9182,"./ms":5197,"./ms-my":9136,"./ms-my.js":9136,"./ms.js":5197,"./mt":6408,"./mt.js":6408,"./my":1683,"./my.js":1683,"./nb":3141,"./nb.js":3141,"./ne":9344,"./ne.js":9344,"./nl":4703,"./nl-be":4641,"./nl-be.js":4641,"./nl.js":4703,"./nn":9873,"./nn.js":9873,"./oc-lnc":1217,"./oc-lnc.js":1217,"./pa-in":4612,"./pa-in.js":4612,"./pl":4457,"./pl.js":4457,"./pt":1089,"./pt-br":9146,"./pt-br.js":9146,"./pt.js":1089,"./ro":5950,"./ro.js":5950,"./ru":7292,"./ru.js":7292,"./sd":6774,"./sd.js":6774,"./se":7493,"./se.js":7493,"./si":3761,"./si.js":3761,"./sk":9711,"./sk.js":9711,"./sl":8558,"./sl.js":8558,"./sq":8633,"./sq.js":8633,"./sr":688,"./sr-cyrl":7903,"./sr-cyrl.js":7903,"./sr.js":688,"./ss":1991,"./ss.js":1991,"./sv":7020,"./sv.js":7020,"./sw":5891,"./sw.js":5891,"./ta":5714,"./ta.js":5714,"./te":206,"./te.js":206,"./tet":4768,"./tet.js":4768,"./tg":8276,"./tg.js":8276,"./th":7977,"./th.js":7977,"./tk":6928,"./tk.js":6928,"./tl-ph":8046,"./tl-ph.js":8046,"./tlh":1361,"./tlh.js":1361,"./tr":4367,"./tr.js":4367,"./tzl":627,"./tzl.js":627,"./tzm":2636,"./tzm-latn":8148,"./tzm-latn.js":8148,"./tzm.js":2636,"./ug-cn":8823,"./ug-cn.js":8823,"./uk":461,"./uk.js":461,"./ur":1366,"./ur.js":1366,"./uz":3454,"./uz-latn":8374,"./uz-latn.js":8374,"./uz.js":3454,"./vi":8572,"./vi.js":8572,"./x-pseudo":464,"./x-pseudo.js":464,"./yo":3709,"./yo.js":3709,"./zh-cn":5873,"./zh-cn.js":5873,"./zh-hk":7549,"./zh-hk.js":7549,"./zh-mo":2240,"./zh-mo.js":2240,"./zh-tw":405,"./zh-tw.js":405};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}n.keys=function(){return Object.keys(l)},n.resolve=s,e.exports=n,n.id=5358},8985:function(e,t,a){"use strict";var l=a(5130),n=a(6768),s=a(144),r=a(4232),o=a(1114);class i{constructor(e){(0,o.A)(this,"servicePath",void 0),(0,o.A)(this,"hostPath","https://insurka.ru/api/"),this.servicePath=e,console.log(this.hostPath)}baseFetch(e,t,a=null){const l=this.hostPath+this.servicePath+t,n=null!==a?a:new Headers;return n.set("Content-Type","application/json; charset=utf-8"),fetch(l,{method:"POST",headers:n,credentials:"include",body:void 0===e?JSON.stringify({}):JSON.stringify(e)})}async CallHandler(e,t){const a=this.baseFetch(e,t);return a.then((e=>e.json())).then((e=>e))}async CallHandlerV2(e,t,a=null){let l,n;try{l=await this.baseFetch(e,t,a),console.log({Path:t,Request:e,Response:l})}catch(r){n=r}const s={onException:e=>(n&&e(),s),onBusinessError:e=>(l&&400===l.status&&l.json().then((t=>{e(t)})),l&&401===l.status&&e({ErrorCode:"Unauthorized",Message:"Для начала необходимо авторизоваться!",ErrorDetails:new Map}),s)};if(l&&200===l.status)try{const e=l.headers.get("Content-Length");"0"!==e&&l.body?s.data=await l.json():s.data={}}catch(r){s.data={},console.error("JSON parsing error:",r)}else s.error={ErrorCode:"0",Message:"Что-то пошло не так! Ошибка сервера.",ErrorDetails:new Map};return s}async CallHandlerAsync(e,t){const a=await this.CallHandler(e,t);return console.log({path:this.servicePath+t,request:e,response:a}),a}async fetchV2(e,t,a=null){return await this.CallHandlerV2(e,t,a)}async CallPostHandlerAsync(e,t){const a=await this.baseFetch(e,t);return console.log({path:this.servicePath+t,request:e,response:a}),a}async CallHandlerByFormDataAsync(e,t){const a=this.hostPath+this.servicePath+e;await fetch(a,{method:"POST",body:t}).then((e=>console.log(e))).catch((e=>console.log("error",e)))}isErrorDetails(e){return void 0!==e.ErrorCode}}class u extends i{constructor(){super("v1/translations/")}async V1GetByEpisodeAsync(e){return await this.CallHandlerAsync(e,"get-by-episode")}}a(4114);var d=a.p+"img/Logo.4755c52f.svg";const c={key:0,class:"label-large base-button__button base-button__light"},v={key:1,class:"label-large base-button__button base-button__dark"},p={key:2,class:"label-large base-button__button base-button__text"},m={key:3,class:"label-large base-button__button base-button__filled"},_={key:4,class:"label-large base-button__button base-button__outline"};var b=(0,n.pM)({__name:"BaseButton",props:{buttonType:{type:Number,default:1},variant:{type:String,default:"skip",validator(e){return["skip","filled","outline"].some((t=>t===e))}}},setup(e){return(t,a)=>1===e.buttonType&&"skip"===e.variant?((0,n.uX)(),(0,n.CE)("button",c,[(0,n.RG)(t.$slots,"default")])):2===e.buttonType&&"skip"===e.variant?((0,n.uX)(),(0,n.CE)("button",v,[(0,n.RG)(t.$slots,"default")])):3===e.buttonType&&"skip"===e.variant?((0,n.uX)(),(0,n.CE)("button",p,[(0,n.RG)(t.$slots,"default")])):"filled"===e.variant?((0,n.uX)(),(0,n.CE)("button",m,[(0,n.RG)(t.$slots,"default")])):"outline"===e.variant?((0,n.uX)(),(0,n.CE)("button",_,[(0,n.RG)(t.$slots,"default")])):(0,n.Q3)("",!0)}});const g=b;var h=g;const f={class:"text-button__text"};function y(e,t){return(0,n.uX)(),(0,n.CE)("a",f,[(0,n.RG)(e.$slots,"default",{},void 0,!0)])}var k=a(1241);const C={},w=(0,k.A)(C,[["render",y],["__scopeId","data-v-46b3cf3e"]]);var L=w,E=(0,n.pM)({__name:"BaseDropMenu",props:{height:{type:String,required:!1,default:"auto"},menuAlign:{type:String,required:!1,default:"right",validator(e){return["left","right"].some((t=>t===e))}}},setup(e){const t=(0,s.KR)(!1);function a(){t.value=!t.value}function l(){t.value=!1}return(s,o)=>((0,n.uX)(),(0,n.CE)("div",{ref:"parent",class:"drop-menu__box",style:(0,r.Tr)({height:e.height})},[(0,n.RG)(s.$slots,"header",{ref:"child",class:"drop-menu__button",onClick:a}),t.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,r.C4)(["drop-menu__menu",{"drop-menu__menu-right":"right"===e.menuAlign}]),onClick:l},[(0,n.RG)(s.$slots,"menu")],2)):(0,n.Q3)("",!0)],4))}});const V=(0,k.A)(E,[["__scopeId","data-v-72a73a63"]]);var R=V;const I={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F=(0,n.Lk)("circle",{cx:"12",cy:"10",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),x=(0,n.Lk)("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"},null,-1),S=(0,n.Lk)("path",{d:"M17.7805 18.8264C17.9076 18.7566 17.9678 18.6055 17.914 18.4708C17.5284 17.5045 16.7856 16.6534 15.7814 16.0332C14.6966 15.3632 13.3674 15 12 15C10.6326 15 9.30341 15.3632 8.21858 16.0332C7.21444 16.6534 6.4716 17.5045 6.08598 18.4708C6.03223 18.6055 6.09236 18.7566 6.21948 18.8264C9.81971 20.803 14.1803 20.803 17.7805 18.8264Z",fill:"currentColor"},null,-1),A=[F,x,S];function M(e,t){return(0,n.uX)(),(0,n.CE)("svg",I,A)}const j={},K=(0,k.A)(j,[["render",M]]);var T=K;const B={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W=(0,n.Lk)("path",{d:"M20.3335 12L21.1144 11.3753L21.6141 12L21.1144 12.6247L20.3335 12ZM12.8335 13C12.2812 13 11.8335 12.5523 11.8335 12C11.8335 11.4478 12.2812 11 12.8335 11V13ZM17.781 7.20868L21.1144 11.3753L19.5526 12.6247L16.2193 8.45807L17.781 7.20868ZM21.1144 12.6247L17.781 16.7914L16.2193 15.542L19.5526 11.3753L21.1144 12.6247ZM20.3335 13H12.8335V11H20.3335V13Z",fill:"currentColor"},null,-1),X=(0,n.Lk)("path",{d:"M13.6665 8.77657V8.15705C13.6665 6.80843 13.6665 6.13412 13.2715 5.66788C12.8766 5.20164 12.2114 5.09078 10.8812 4.86907L9.4885 4.63696C6.78592 4.18653 5.43463 3.96131 4.55057 4.71023C3.6665 5.45914 3.6665 6.82907 3.6665 9.56893V14.431C3.6665 17.1708 3.6665 18.5408 4.55057 19.2897C5.43463 20.0386 6.78592 19.8134 9.4885 19.363L10.8812 19.1308C12.2114 18.9091 12.8766 18.7983 13.2715 18.332C13.6665 17.8658 13.6665 17.1915 13.6665 15.8429V15.3883",stroke:"currentColor","stroke-width":"2"},null,-1),N=[W,X];function D(e,t){return(0,n.uX)(),(0,n.CE)("svg",B,N)}const H={},O=(0,k.A)(H,[["render",D]]);var G=O,Q=a(3367);const U=(0,Q.nY)("store",{state(){const e=localStorage.getItem("userStore");return e?JSON.parse(e):{userId:0,nickname:"",roles:[],loggedIn:!1,imageUrl:"/images/film_test.png",email:""}},actions:{LogIn(e,t,a,l,n){this.userId=e,this.nickname=t,this.roles=n,this.email=a,this.imageUrl=l,this.loggedIn=!0,localStorage.setItem("userStore",JSON.stringify(this.$state))},LogOut(){this.loggedIn=!1,localStorage.removeItem("userStore")},UpdateNickname(e){this.nickname=e,localStorage.removeItem("userStore"),localStorage.setItem("userStore",JSON.stringify(this.$state))},UpdateEmail(e){this.email=e,localStorage.removeItem("userStore"),localStorage.setItem("userStore",JSON.stringify(this.$state))}}}),q={width:"8",height:"5",viewBox:"0 0 8 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P=(0,n.Lk)("path",{d:"M0.25 0.5L4 4.25L7.75 0.5H0.25Z",fill:"currentColor"},null,-1),Z=[P];function $(e,t){return(0,n.uX)(),(0,n.CE)("svg",q,Z)}const z={},Y=(0,k.A)(z,[["render",$]]);var J=Y;const ee={key:0,class:"base-background__default"},te={key:1,class:"base-background__secondary"},ae={key:2,class:"base-background__bordered"};var le=(0,n.pM)({__name:"BaseBackground",props:{type:{type:Number,default:1,required:!1}},setup(e){const t=e;return(e,a)=>1===t.type?((0,n.uX)(),(0,n.CE)("div",ee,[(0,n.RG)(e.$slots,"default")])):2===t.type?((0,n.uX)(),(0,n.CE)("div",te,[(0,n.RG)(e.$slots,"default")])):3===t.type?((0,n.uX)(),(0,n.CE)("div",ae,[(0,n.RG)(e.$slots,"default")])):(0,n.Q3)("",!0)}});const ne=le;var se=ne;const re={class:"filter-chips__box"},oe={key:0,class:"filter-chips__icon"},ie={class:"filter-chips__text"};var ue=(0,n.pM)({__name:"FilterChips",props:{text:{type:String,required:!0},enableTextIcon:{type:Boolean,required:!1,default:!1},enableMenuIcon:{type:Boolean,required:!1,default:!1}},setup(e){return(t,a)=>((0,n.uX)(),(0,n.CE)("button",re,[e.enableTextIcon?((0,n.uX)(),(0,n.CE)("div",oe,[(0,n.RG)(t.$slots,"text-icon")])):(0,n.Q3)("",!0),(0,n.Lk)("p",ie,(0,r.v_)(e.text),1),e.enableMenuIcon?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,r.C4)({"filter-chips__icon":e.enableMenuIcon})},[(0,n.RG)(t.$slots,"menu-icon")],2)):(0,n.Q3)("",!0)]))}});const de=(0,k.A)(ue,[["__scopeId","data-v-23e901a4"]]);var ce,ve=de;(function(e){e[e["Left"]=0]="Left",e[e["Right"]=1]="Right"})(ce||(ce={}));const pe={key:0,class:"selector__label"},me=["onClick"];var _e=(0,n.pM)({__name:"BaseSelector",props:{modelValue:{required:!0,default:""},title:{type:String,required:!1,default:""},label:{type:String,required:!1,default:null},buttonBorder:{type:Boolean,default:!1},buttonBackground:{type:String,default:"none"},markAsInvalidInput:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1,required:!1},selectableValues:{type:Array,required:!0},menuAlignment:{type:Number,default:ce.Right},isDropped:{type:Boolean,default:!1,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){(0,l.$9)((e=>({"4536e787":e.background})));const a=t,o=e,i=(0,s.KR)((o.modelValue?.length??0)>0?o.modelValue:o.title??""),u=(0,s.KR)(!1);function d(e){o.isDisabled?u.value=!1:o.selectableValues.length>0?u.value=e:u.value=!1}function c(){u.value=!1}function v(e){i.value=e,u.value=!1,a("update:modelValue",e)}function p(){return[o.menuAlignment===ce.Left?"selector__menu-left":"",o.menuAlignment===ce.Right?"selector__menu-right":""]}return(0,n.wB)((()=>o.modelValue),(e=>{i.value=e})),(0,n.wB)((()=>o.isDropped),(e=>{u.value=e})),(0,n.wB)((()=>o.isDisabled),(e=>{e&&(i.value=o.title)})),(t,a)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["selector__box",{"selector__box-errored":e.markAsInvalidInput}])},[e.label?((0,n.uX)(),(0,n.CE)("label",pe,(0,r.v_)(e.label),1)):(0,n.Q3)("",!0),(0,n.RG)(t.$slots,"header",{dropMenu:d},(()=>[(0,n.bF)(ve,{class:(0,r.C4)(["selector__button",{"selector__button-selected":i.value.value!==o.title,"selector__button-bordered":o.buttonBorder,selector__disabled:o.isDisabled}]),text:i.value,"enable-menu-icon":!0,onClick:a[0]||(a[0]=e=>d(!u.value))},{"menu-icon":(0,n.k6)((()=>[(0,n.bF)(J,{class:(0,r.C4)({selector__disabled:o.isDisabled})},null,8,["class"])])),_:1},8,["class","text"])])),(0,n.bo)((0,n.Lk)("div",{class:(0,r.C4)(["selector__menu selector__title-bordered",p()]),onClick:c},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.selectableValues,(e=>((0,n.uX)(),(0,n.CE)("button",{key:e,class:"selector__menu-button",onClick:t=>v(e)},(0,r.v_)(e),9,me)))),128))],2),[[l.aG,u.value&&e.selectableValues.length>0]])],2))}});const be=(0,k.A)(_e,[["__scopeId","data-v-5c6c749d"]]);var ge=be;const he={width:"3",height:"14",viewBox:"0 0 3 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe=(0,n.Lk)("path",{d:"M2.74058 1.8359C2.74058 2.56736 2.14761 3.16033 1.41615 3.16033C0.684687 3.16033 0.0917206 2.56736 0.0917206 1.8359C0.0917206 1.10444 0.684687 0.511475 1.41615 0.511475C2.14761 0.511475 2.74058 1.10444 2.74058 1.8359Z",fill:"currentColor"},null,-1),ye=(0,n.Lk)("path",{d:"M2.74058 7.13361C2.74058 7.86507 2.14761 8.45804 1.41615 8.45804C0.684687 8.45804 0.0917206 7.86507 0.0917206 7.13361C0.0917206 6.40215 0.684687 5.80918 1.41615 5.80918C2.14761 5.80918 2.74058 6.40215 2.74058 7.13361Z",fill:"currentColor"},null,-1),ke=(0,n.Lk)("path",{d:"M2.74058 12.4313C2.74058 13.1628 2.14761 13.7557 1.41615 13.7557C0.684687 13.7557 0.0917206 13.1628 0.0917206 12.4313C0.0917206 11.6999 0.684687 11.1069 1.41615 11.1069C2.14761 11.1069 2.74058 11.6999 2.74058 12.4313Z",fill:"currentColor"},null,-1),Ce=[fe,ye,ke];function we(e,t,a,l,s,r){return(0,n.uX)(),(0,n.CE)("svg",he,Ce)}var Le={name:"DetailsIcon"};const Ee=(0,k.A)(Le,[["render",we]]);var Ve=Ee;const Re={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ie=(0,n.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 8V6H21V8H3ZM3 13H21V11H3V13ZM3 18H21V16H3V18Z",fill:"currentColor"},null,-1),Fe=[Ie];function xe(e,t){return(0,n.uX)(),(0,n.CE)("svg",Re,Fe)}const Se={},Ae=(0,k.A)(Se,[["render",xe]]);var Me=Ae,je=a(1387);const Ke=e=>((0,n.Qi)("data-v-fe7aad92"),e=e(),(0,n.jt)(),e),Te={style:{height:"56px"},class:"row h__space-between v__center"},Be={class:"row gap-16 v__center"},We={class:"row gap-16 v__center"},Xe=Ke((()=>(0,n.Lk)("img",{class:"header__logo",src:d,alt:"Главная"},null,-1))),Ne={class:"row gap-16 v__center"},De={key:0,class:"row gap-16"},He={key:1,class:"row gap-8"};var Oe=(0,n.pM)({__name:"PrimaryHeader",setup(e){const t=U(),a=(0,je.rd)(),o=(0,s.KR)(!1),i=(0,s.KR)(""),u=["Главная","Редактор","Поиск"],d=(0,s.KR)(window.innerWidth),c=(0,n.EW)((()=>d.value<=720)),v=()=>{d.value=window.innerWidth};function p(e){u[0]===e?a.push("/"):u[1]===e?a.push("/edit"):u[2]===e&&a.push("/search"),o.value=!1}return(0,n.sV)((()=>{window.addEventListener("resize",v)})),(0,n.xo)((()=>{window.removeEventListener("resize",v)})),(e,a)=>{const d=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Te,[(0,n.bo)((0,n.Lk)("nav",Be,[(0,n.bF)(ge,{"model-value":i.value,"selectable-values":u,title:"Меню","menu-alignment":(0,s.R1)(ce).Left,"is-dropped":o.value,"onUpdate:modelValue":p},{header:(0,n.k6)((()=>[(0,n.bF)(h,{style:{"background-color":"#303036"},class:"m-radius-circle m-border gap-16",onClick:a[0]||(a[0]=()=>{o.value=!o.value})},{default:(0,n.k6)((()=>[(0,n.bF)(Me),(0,n.eW)(" Меню ")])),_:1})])),_:1},8,["model-value","menu-alignment","is-dropped"])],512),[[l.aG,c.value]]),(0,n.bo)((0,n.Lk)("nav",We,[(0,n.bF)(d,{class:"row v__center",to:"/"},{default:(0,n.k6)((()=>[Xe])),_:1}),(0,n.bF)(d,{to:"/edit",class:"header__text-button body-small m-radius-circle m-border v__center"},{default:(0,n.k6)((()=>[(0,n.eW)(" Редактор ")])),_:1}),(0,n.bF)(d,{to:"/",class:"header__text-button m-radius-circle"},{default:(0,n.k6)((()=>[(0,n.eW)(" Главная ")])),_:1}),(0,n.bF)(d,{to:"/search",class:"header__text-button m-radius-circle"},{default:(0,n.k6)((()=>[(0,n.eW)(" Поиск ")])),_:1})],512),[[l.aG,!c.value]]),(0,n.Lk)("div",Ne,[(0,s.R1)(t).$state.loggedIn?((0,n.uX)(),(0,n.CE)("div",He,[(0,n.bF)(R,{class:"header__user gap-16"},{header:(0,n.k6)((({onClick:e})=>[(0,n.bF)(h,{class:"header__text-button gap-8 v__center m-radius-circle","button-type":3,onClick:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)((0,s.R1)(t).nickname)+" ",1),(0,n.bF)(J)])),_:2},1032,["onClick"])])),menu:(0,n.k6)((({onClick:e})=>[(0,n.bF)(se,{class:"header__menu m-radius-1 column v__start h__center",onClick:e},{default:(0,n.k6)((()=>[(0,n.bF)(d,{to:"/profile",class:"header__menu-button row gap-8 v__center h__start"},{default:(0,n.k6)((()=>[(0,n.bF)(T),(0,n.eW)(" Профиль ")])),_:1}),(0,n.bF)(d,{to:"settings",class:"header__menu-button row gap-8 v__center h__start"},{default:(0,n.k6)((()=>[(0,n.bF)(Ve),(0,n.eW)(" Настройки ")])),_:1}),(0,n.bF)(d,{class:"header__menu-button row gap-8 v__center h__start",to:"/",onClick:(0,s.R1)(t).LogOut},{default:(0,n.k6)((()=>[(0,n.bF)(G),(0,n.eW)(" Выйти ")])),_:1},8,["onClick"])])),_:2},1032,["onClick"])])),_:1})])):((0,n.uX)(),(0,n.CE)("div",De,[(0,n.bF)(d,{to:"/login"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{class:"header__text-button m-radius-circle"},{default:(0,n.k6)((()=>[(0,n.eW)(" Войти ")])),_:1})])),_:1}),(0,n.bF)(d,{to:"/reg"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{class:"header__text-button m-radius-circle"},{default:(0,n.k6)((()=>[(0,n.eW)(" Регистрация ")])),_:1})])),_:1})]))])])}}});const Ge=(0,k.A)(Oe,[["__scopeId","data-v-fe7aad92"]]);var Qe,Ue,qe=Ge;(function(e){e["PopularForTwoWeeks"]="PopularForTwoWeeks",e["LastCreated"]="LastCreated",e["LastUpdated"]="LastUpdated"})(Qe||(Qe={}));class Pe{constructor(e,t,a){(0,o.A)(this,"contentId",void 0),(0,o.A)(this,"selectedInfo",void 0),(0,o.A)(this,"userId",void 0),this.contentId=e,this.selectedInfo=t,this.userId=a}}(function(e){e[e["None"]=0]="None",e[e["Episodes"]=1]="Episodes",e[e["ContentGenres"]=2]="ContentGenres",e[e["UserInfo"]=4]="UserInfo",e[e["Translations"]=8]="Translations"})(Ue||(Ue={}));class Ze extends i{constructor(){super("v1/content/")}async V1GetMainPageContentAsync(){const e={mainPageTypes:[Qe.LastCreated,Qe.PopularForTwoWeeks,Qe.LastUpdated],limit:20,offset:0};return this.fetchV2(e,"get-main-page-content")}async V1GetById(e,t){const a=new Pe(e,Ue.ContentGenres|Ue.UserInfo|Ue.Episodes,t);return this.CallHandlerAsync(a,"get-by-id")}async V1GetByQuery(e){return this.CallHandlerAsync(e,"get-by-query")}async searchBy(e){return this.CallHandlerAsync({Search:e},"search-by")}async incrementViews(e){return this.CallPostHandlerAsync({ContentId:e},"increment-views")}}class $e extends i{constructor(){super("image")}async insertImage(e,t,a){const l=new FormData;l.append("Image",a),null!=e&&l.append("ContentId",e.toString()),l.append("HistoryId",t.toString()),await this.CallHandlerByFormDataAsync("/content/insert",l)}getImageLink(e,t){return this.hostPath+`image/content/get-avatar?ImageId=${e}&ContentId=${t}`}}class ze extends i{constructor(){super("v1/changes/")}async createContentChange(e){return await this.CallHandlerAsync(e,"create-content")}async createEpisodeChange(e){return await this.CallPostHandlerAsync(e,"create-episode")}async getChangesComparisons(e){return await this.fetchV2(e,"get-changes-comparisons")}async approve(e,t){return await this.fetchV2({HistoryId:e,UserId:t},"approve")}}class Ye extends i{constructor(){super("v1/episode/")}async query(e){return await this.CallHandlerAsync(e,"query")}async incrementViews(e){return this.CallPostHandlerAsync({EpisodeId:e},"increment-views")}}class Je{constructor(){(0,o.A)(this,"EpisodeIds",void 0),(0,o.A)(this,"ContentIds",void 0),(0,o.A)(this,"Limit",void 0),(0,o.A)(this,"Offset",void 0)}}class et extends i{constructor(){super("v1/translator/")}async query(e){return await this.CallHandlerAsync(e,"query")}}const tt={Info:"Info",Warning:"Warning",Error:"Error",Success:"Success"},at=(0,Q.nY)("client-event-store",{state(){return{events:[]}},actions:{push(e,t){this.events.push({eventType:t,text:e})}}});var lt=(0,n.pM)({__name:"AutoHide",setup(e){const t=(0,s.KR)(!0),a=(0,s.KR)(!1);let o=!1;function i(){t.value=!0,setTimeout((()=>{o||(a.value=!0,setTimeout((()=>{t.value=!1,a.value=!1}),1e3))}),2e3)}function u(){console.log("mouseEnter"),o=!0,t.value=!0,a.value=!1}function d(){console.log("mouseLeave"),o=!1,i()}return i(),(e,s)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["auto-hide__message",{"auto-hide__fade-out":a.value}]),onClick:(0,l.D$)(i,["stop"]),onMouseenter:u,onMouseleave:d,onMousedown:i,onMouseover:u},[(0,n.RG)(e.$slots,"default")],34)),[[l.aG,t.value]])}});const nt=(0,k.A)(lt,[["__scopeId","data-v-51c37159"]]);var st=nt;class rt extends i{constructor(){super("v1/genre/")}async Query(e){return await this.CallHandlerAsync(e,"query")}}class ot extends i{constructor(){super("v1/user/")}async logIn(e,t,a){const l=this.hostPath+this.servicePath+"login-by-cookie",n=new Headers;n.set("Content-Type","application/json; charset=utf-8");const s={Email:e,Password:t,IsRememberMe:a},r=JSON.stringify(s),o=await fetch(l,{method:"POST",headers:n,body:r,credentials:"include"});if(400===o.status){const e=await o.json();return console.log({path:o.url,response:e}),e}return 200===o.status?o:{ErrorCode:"0",Message:"Что-то пошло не так! Ошибка сервера.",ErrorDetails:new Map}}async getCurrent(){return await this.fetchV2({},"current")}async registration(e,t,a){return await this.fetchV2({email:t,nickname:e,password:a},"registration/create")}async sendPasswordResetCode(e){return await this.fetchV2({email:e},"reset-password/send-code")}async verifyPasswordResetCode(e,t){return await this.fetchV2({Email:e,Code:t},"reset-password/verify-code")}async resetPassword(e,t,a){const l=this.hostPath+this.servicePath+"reset-password/finish",n=new Headers;n.set("Content-Type","application/json; charset=utf-8"),n.set("Authorization","Bearer "+a);const s=JSON.stringify({Email:e,NewPassword:t}),r=await fetch(l,{method:"POST",headers:n,body:s});console.log({path:l,request:s,response:r})}async UpdateNickname(e,t){return await this.fetchV2({NewNickname:e,IsForce:t},"update-nickname")}async SendUpdateMailCode(){return await this.fetchV2({},"update-mail/old-email-send-code")}async VerifyOldMailCode(e){return await this.fetchV2({Code:e},"update-mail/old-email-verify-code")}async SendNewMailCode(e,t){const a=new Headers;return a.set("Authorization","Bearer "+t),await this.fetchV2({NewMail:e},"update-mail/new-email-send-code",a)}async VerifyNewMailCode(e,t,a){const l=new Headers;return l.set("Authorization","Bearer "+a),await this.fetchV2({NewMail:e,Code:t},"update-mail/new-email-verify-code",l)}async sendMailVerifyCode(e){const t=new Headers;return t.set("Content-Type","application/json; charset=utf-8"),t.set("Authorization","Bearer "+e),await this.fetchV2({},"registration/send-verify-code",t)}async verifyRegistrationCode(e,t){const a=new Headers;return a.set("Content-Type","application/json; charset=utf-8"),a.set("Authorization","Bearer "+t),await this.fetchV2({VerificationCode:e},"registration/verify-mail",a)}}class it extends i{constructor(){super("v1/favorite/")}async query(e=null,t=null,a=1,l=0){return await this.fetchV2({ContentIds:null===e?[]:[e],EpisodeIds:null===t?[]:[t],Limit:a,Offset:l},"query")}async getList(e,t,a){return await this.fetchV2({Status:e,Limit:t,Offset:a},"get-list")}async setStatus(e,t){return await this.fetchV2({ContentId:e,Status:t},"set-status")}async setStars(e,t){return await this.fetchV2({ContentId:e,Stars:t},"set-stars")}async setEpisode(e,t){return await this.fetchV2({ContentId:e,EpisodeId:t},"set-episode")}}const ut={style:{height:"100vh"}},dt={class:"material wrapper"},ct=(0,n.Lk)("div",{class:"primary-header__background"},null,-1),vt={class:"event__box gap-8"};var pt={__name:"App",setup(e){(0,n.Gt)("content-service",new Ze),(0,n.Gt)("translation-service",new u),(0,n.Gt)("image-service",new $e),(0,n.Gt)("changes-history-service",new ze),(0,n.Gt)("episode-service",new Ye),(0,n.Gt)("translator-service",new et),(0,n.Gt)("genre-service",new rt),(0,n.Gt)("user-api",new ot),(0,n.Gt)("favorite-api",new it);const t=new at,a=(0,n.EW)((()=>t.$state.events));return(e,t)=>{const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",ut,[(0,n.Lk)("div",dt,[ct,(0,n.bF)(qe,{class:"primary-header__grid"}),(0,n.bF)(l,{class:"body__grid"}),(0,n.Lk)("div",vt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(e=>((0,n.uX)(),(0,n.Wv)(st,{key:e},{default:(0,n.k6)((()=>[e.eventType===(0,s.R1)(tt).Info?((0,n.uX)(),(0,n.Wv)(se,{key:0,type:2,class:"event__unit-info event__unit body-medium m3-bg-1 m-radius-1"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.text),1)])),_:2},1024)):e.eventType===(0,s.R1)(tt).Success?((0,n.uX)(),(0,n.Wv)(se,{key:1,type:2,class:"event__unit-success event__unit body-medium m3-bg-1 m-radius-1"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.text),1)])),_:2},1024)):e.eventType===(0,s.R1)(tt).Error?((0,n.uX)(),(0,n.Wv)(se,{key:2,type:2,class:"event__unit-error event__unit body-medium m3-bg-1 m-radius-1"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.text),1)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024)))),128))])])])}}};const mt=pt;var _t=mt;const bt={width:"13",height:"13",viewBox:"0 0 13 14",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},gt=(0,n.Lk)("path",{d:"M1.17168 5.36769C1.17168 3.49467 1.17168 2.55816 1.75355 1.97628C2.33542 1.39441 3.27194 1.39441 5.14496 1.39441H7.79381C9.66684 1.39441 10.6033 1.39441 11.1852 1.97628C11.7671 2.55816 11.7671 3.49467 11.7671 5.36769V9.88903C11.7671 11.6659 11.7671 12.5544 11.208 12.8261C10.6489 13.0979 9.95028 12.549 8.55306 11.4512L8.1059 11.0998C7.32027 10.4825 6.92746 10.1739 6.46939 10.1739C6.01132 10.1739 5.6185 10.4825 4.83287 11.0998L4.38571 11.4512C2.98849 12.549 2.28988 13.0979 1.73078 12.8261C1.17168 12.5544 1.17168 11.6659 1.17168 9.88903V5.36769Z",stroke:"currentColor","stroke-width":"1.80937"},null,-1),ht=[gt];function ft(e,t){return(0,n.uX)(),(0,n.CE)("svg",bt,ht)}const yt={},kt=(0,k.A)(yt,[["render",ft]]);var Ct=kt;class wt{}(0,o.A)(wt,"HIDE_USER_ACTIVITIES",!1);const Lt={class:"search-item__image-box-1"},Et={key:0,class:"search-item__tags-box"},Vt={class:"search-item__first-tags-box"},Rt={key:0,class:"search-item__tag"},It={class:"label-medium"},Ft={key:1,class:"search-item__tag"},xt={class:"label-medium"},St={class:"row row-dynamic gap-8"},At={class:"label-medium"},Mt={class:"search-item__image-box m-radius-16"},jt=["src","alt"],Kt={class:"search-item__details-box"},Tt={class:"search-item__description search-item__line-breaker"},Bt={key:0,class:"search-item__genre search-item__line-breaker"},Wt={key:1,class:"search-item__icon-button"},Xt={key:2,class:"search-item__icon-button"};var Nt=(0,n.pM)({__name:"SearchItem",props:{content:{type:Object,required:!0}},setup(e){const t=e,l=e=>[...new Set(e)],o=(0,n.WQ)("image-service"),i=o.getImageLink(t.content.ImageId,t.content.Id),u=(0,s.KR)(i);return(t,o)=>{const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.Wv)(se,{class:"search-item__box",type:3},{default:(0,n.k6)((()=>[(0,n.bF)(i,{to:{name:"theater",params:{id:e.content.Id}}},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Lt,[e.content.MinAge||e.content.SeriesCounter?((0,n.uX)(),(0,n.CE)("div",Et,[(0,n.Lk)("div",Vt,[e.content.MinAge?((0,n.uX)(),(0,n.CE)("div",Rt,[(0,n.Lk)("span",It,(0,r.v_)(e.content.MinAge)+"+",1)])):(0,n.Q3)("",!0),e.content.SeriesCounter?((0,n.uX)(),(0,n.CE)("div",Ft,[(0,n.Lk)("span",xt,(0,r.v_)(e.content.SeriesCounter),1)])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",St,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l(e.content.Translates),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"search-item__tag"},[(0,n.Lk)("p",At,(0,r.v_)(e),1)])))),128))])])):(0,n.Q3)("",!0),(0,n.Lk)("div",Mt,[(0,n.Lk)("img",{class:"search-item__image",src:u.value,alt:e.content.Title,onError:o[0]||(o[0]=()=>{u.value=a(1133)})},null,40,jt)])]),(0,n.Lk)("div",Kt,[(0,n.bF)(L,{class:"title-large search-item__title search-item__line-breaker"},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(e.content.Title),1)])),_:1}),(0,n.Lk)("a",Tt,(0,r.v_)(e.content.Description),1),e.content.Genres?((0,n.uX)(),(0,n.CE)("p",Bt,(0,r.v_)(e.content.Genres),1)):(0,n.Q3)("",!0),(0,s.R1)(wt).HIDE_USER_ACTIVITIES?((0,n.uX)(),(0,n.CE)("button",Wt,[(0,n.bF)(Ct,{class:"search-item__icon"})])):(0,n.Q3)("",!0),(0,s.R1)(wt).HIDE_USER_ACTIVITIES?((0,n.uX)(),(0,n.CE)("button",Xt,[(0,n.bF)(Ve,{class:"search-item__icon"})])):(0,n.Q3)("",!0)])])),_:1},8,["to"])])),_:1})}}});const Dt=(0,k.A)(Nt,[["__scopeId","data-v-df8c9820"]]);var Ht=Dt,Ot=a(9148),Gt=a.n(Ot);const Qt={Null:"Null",Korea:"Korea",Japan:"Japan",China:"China"};class Ut{static mapToViewModel(e){let t=[];return e.Content.ReleasedAt&&t.push(Gt()(new Date(e.Content.ReleasedAt)).format("YYYY")),e.Content.Country&&e.Content.Country.toString()!=Qt.Null.toString()&&t.push(e.Content.Country.toString()),e.Content.EngTitle&&t.push(e.Content.EngTitle),e.Content.OriginTitle&&t.push(e.Content.OriginTitle),{Id:e.Content.Id,ImageId:e.Content.ImageId,Title:e.Content.Title,Description:t.join(" / "),Translates:[],Genres:e.Genres.join(" / "),MinAge:e.Content.MinAgeLimit,SeriesCounter:e.Content.OutSeries+"/"+e.Content.PlannedSeries}}static getContentViewModel(e){let t=[];e.Content.ReleasedAt&&t.push(Gt()(new Date(e.Content.ReleasedAt)).format("YYYY")),e.Content.Country&&e.Content.Country.toString()!=Qt.Null.toString()&&t.push(e.Content.Country.toString()),e.Content.EngTitle&&t.push(e.Content.EngTitle),e.Content.OriginTitle&&t.push(e.Content.OriginTitle);let a=e.Content.OutSeries+"/"+e.Content.PlannedSeries;return{Id:e.Content.Id,ImageId:e.Content.ImageId,Title:e.Content.Title,Description:t.join(" / "),Translates:e.Translations.map((e=>e.Language.toString())),Genres:e.Genres.map((e=>e.Name)).join(" / "),MinAge:e.Content.MinAgeLimit>=0?e.Content.MinAgeLimit:null,SeriesCounter:a}}}const qt={class:"scroll-content-component gap-8"},Pt={class:"scroll-content-component__headline headline-small"},Zt={class:"scroll-content-component__box row gap-16"};var $t=(0,n.pM)({__name:"ScrollContentComponent",props:{title:{type:String,required:!0},contents:{type:Array,required:!0}},setup(e){const t=e;return(a,o)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",qt,[(0,n.Lk)("h1",Pt,(0,r.v_)(e.title),1),(0,n.Lk)("div",Zt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.contents,(e=>((0,n.uX)(),(0,n.Wv)(Ht,{key:e,content:(0,s.R1)(Ut).mapToViewModel(e)},null,8,["content"])))),128))])],512)),[[l.aG,t.contents.length>0]])}});const zt=(0,k.A)($t,[["__scopeId","data-v-1a08899e"]]);var Yt=zt;const Jt={class:"body-main-flex gap-16"};var ea=(0,n.pM)({__name:"HomeView",setup(e){const t=at(),a=(0,n.WQ)("content-service");function l(e){switch(e){case Qe.PopularForTwoWeeks:return"Популярное";case Qe.LastCreated:return"Новинки";case Qe.LastUpdated:return"Последние обновления"}}let r=(0,s.KR)(null);function o(e){return e.PageContent.map((e=>e.MainPageType))}return(0,n.sV)((async()=>{const e=(await a.V1GetMainPageContentAsync()).onException((()=>{t.push("Ошибка сервера! Сообщите нам о проблеме или попробуйте вернуться позже.",tt.Error)}));e.data&&(r.value=e.data)})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",Jt,[null!=(0,s.R1)(r)&&void 0!==(0,s.R1)(r).PageContent?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(o((0,s.R1)(r)),((e,t)=>((0,n.uX)(),(0,n.Wv)(Yt,{key:t,title:l(e),contents:(0,s.R1)(r).PageContent[t].ContentsInfo},null,8,["title","contents"])))),128)):(0,n.Q3)("",!0)]))}});const ta=(0,k.A)(ea,[["__scopeId","data-v-394820f2"]]);var aa=ta;const la={class:"filter-unit__header-button"};Boolean;class na{constructor(){(0,o.A)(this,"Search",""),(0,o.A)(this,"Filters",new sa),(0,o.A)(this,"QueryPaging",{Limit:20,Offset:0}),(0,o.A)(this,"SelectedInfo",Ue.None)}}class sa{constructor(){(0,o.A)(this,"ContentIds",[]),(0,o.A)(this,"Countries",[]),(0,o.A)(this,"ContentTypes",[]),(0,o.A)(this,"ContentStatuses",[]),(0,o.A)(this,"GenreIds",[])}}const ra={Film:"Film",Documentary:"Documentary",Serial:"Serial",Show:"Show"},oa={Film:"Фильм",Documentary:"Документалка",Serial:"Сериал",Show:"Шоу"};function ia(e){return oa[e]}const ua={Announced:"Announced",Ongoing:"Ongoing",Stopped:"Stopped",Finished:"Finished"},da={Announced:"Анонсировано",Ongoing:"Онгоинг",Stopped:"Приостановлено",Finished:"Завершено"};function ca(e){return e?da[e]:""}const va={SearchInput:"SearchInput",ContentType:"ContentType",Country:"Country",ContentStatus:"ContentStatus"};class pa{constructor(e,t,a,l,n){(0,o.A)(this,"key",void 0),(0,o.A)(this,"selectedValue",void 0),(0,o.A)(this,"type",void 0),(0,o.A)(this,"selectableValues",void 0),(0,o.A)(this,"isMenuDropped",void 0),this.key=e,this.selectedValue=t,this.type=a,this.selectableValues=l,this.isMenuDropped=n}}const ma=["placeholder","type","disabled"];var _a=(0,n.pM)({__name:"BaseInput",props:{modelValue:{default:""},placeHolder:{type:String,required:!1,default:"Введите пароль"},label:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"text"},markAsInvalidInput:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},inputValidator:{type:Function,default:()=>e=>!0,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,o=e,i=(0,s.KR)(o.modelValue);(0,n.wB)((()=>o.modelValue),(e=>{i.value=e}));let u=o.modelValue;function d(e){o.inputValidator(e)?(i.value=e,u=e,a("update:modelValue",e)):i.value=u}return(t,a)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["input__input-static-box",{"input__input-invalid-box":e.markAsInvalidInput}])},[e.label?((0,n.uX)(),(0,n.CE)("label",{key:0,class:(0,r.C4)(["material body-small input__label",{"input__label-errored":e.markAsInvalidInput}])},(0,r.v_)(e.label),3)):(0,n.Q3)("",!0),(0,n.bo)((0,n.Lk)("input",(0,n.v6)({"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e)},t.$attrs,{class:"input__input",placeholder:e.placeHolder,type:e.type,disabled:e.disabled,onInput:a[1]||(a[1]=e=>d(e.target.value))}),null,16,ma),[[l.hp,i.value]]),(0,n.RG)(t.$slots,"end-icon")],2))}});const ba=(0,k.A)(_a,[["__scopeId","data-v-23dd5211"]]);var ga=ba;const ha={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fa=(0,n.Lk)("circle",{cx:"11",cy:"11",r:"7",stroke:"currentColor","stroke-width":"2"},null,-1),ya=(0,n.Lk)("path",{d:"M20 20L16 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),ka=[fa,ya];function Ca(e,t){return(0,n.uX)(),(0,n.CE)("svg",ha,ka)}const wa={},La=(0,k.A)(wa,[["render",Ca]]);var Ea=La;const Va={class:"icon-button__box"};function Ra(e,t){return(0,n.uX)(),(0,n.CE)("div",Va,[(0,n.RG)(e.$slots,"default",{},void 0,!0)])}const Ia={},Fa=(0,k.A)(Ia,[["render",Ra],["__scopeId","data-v-979d4ffe"]]);var xa=Fa;const Sa={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Aa=(0,n.Lk)("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"},null,-1),Ma=[Aa];function ja(e,t){return(0,n.uX)(),(0,n.CE)("svg",Sa,Ma)}const Ka={},Ta=(0,k.A)(Ka,[["render",ja]]);var Ba=Ta;const Wa={class:"search-selector__box"};var Xa=(0,n.pM)({__name:"AsyncSearchSelector",props:{input:{type:String,required:!1,default:""},placeholder:{type:String,required:!0},values:{type:Object,required:!0,default:new Array},isInvalid:{type:Boolean,required:!1,default:!1},showLoopIcon:{type:Boolean,required:!1,default:!0},isDropped:{type:Boolean,required:!1,default:!1},callUpdaterDelay:{type:Number,required:!1,default:0}},emits:["change:input","onkeydown:enter"],setup(e,{emit:t}){const a=e,r=(0,s.KR)(a.input),o=(0,s.KR)(a.isDropped),i=(0,s.KR)("");let u=null;(0,n.wB)((()=>a.input),(e=>{r.value=e})),(0,n.wB)((()=>a.isDropped),(e=>{o.value=e,console.log("DROP MENU:"+e)}));const d=t;function c(){clearTimeout(u),0!==r.value.length?u=setTimeout((()=>{d("change:input",r.value,!1)}),a.callUpdaterDelay):d("change:input",r.value,!1)}function v(e){r.value=e,d("change:input",r.value,!0)}function p(e){r.value.length,e(o.value)}function m(){r.value="",i.value="",d("change:input",r.value,!1),c()}return(t,a)=>((0,n.uX)(),(0,n.Wv)(ge,{modelValue:i.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>i.value=e),v],"mark-as-invalid-input":e.isInvalid,"selectable-values":e.values,"menu-alignment":(0,s.R1)(ce).Left,"is-dropped":o.value,onInput:c},{header:(0,n.k6)((({dropMenu:t})=>[(0,n.Lk)("div",Wa,[(0,n.bF)(ga,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),"place-holder":e.placeholder,onKeyup:e=>p(t),onKeydown:a[1]||(a[1]=(0,l.jR)((0,l.D$)((e=>d("onkeydown:enter",r.value)),["stop"]),["enter"]))},null,8,["modelValue","place-holder","onKeyup"]),r.value.length>0?((0,n.uX)(),(0,n.Wv)(xa,{key:0,onClick:m},{default:(0,n.k6)((()=>[(0,n.bF)(Ba,{style:{color:"var(--on-surface-variant-light)"}})])),_:1})):(0,n.Q3)("",!0),e.showLoopIcon?((0,n.uX)(),(0,n.Wv)(xa,{key:1},{default:(0,n.k6)((()=>[(0,n.bF)(Ea,{style:{color:"var(--primary40)"}})])),_:1})):(0,n.Q3)("",!0)])])),_:1},8,["modelValue","mark-as-invalid-input","selectable-values","menu-alignment","is-dropped"]))}});const Na=(0,k.A)(Xa,[["__scopeId","data-v-6f8f5d71"]]);var Da=Na;const Ha={class:"material search-page__box"},Oa={class:"search-page__body"},Ga={class:"row gap-8"},Qa={key:0,class:"search-page__content-box"},Ua={key:1},qa="По умолчанию";var Pa=(0,n.pM)({__name:"SearchView",setup(e){const t=(0,n.WQ)("content-service"),a=new Map([[qa,!1],[ra.Serial,!1],[ra.Show,!1],[ra.Film,!1],[ra.Documentary,!1]]),r=new Map([[qa,!1],[ua.Announced,!1],[ua.Ongoing,!1],[ua.Finished,!1]]),o=new Map([[qa,!1],[Qt.Korea,!1],[Qt.China,!1],[Qt.Japan,!1]]),i=(0,s.KR)([new pa("Тип","Тип",va.ContentType,a,!1),new pa("Статус","Статус",va.ContentStatus,r,!1),new pa("Страна","Страна",va.Country,o,!1)]),u=(0,je.rd)(),d=(0,s.KR)(""),c=(0,n.EW)((()=>v.value.map((e=>e.Content.Title)))),v=(0,s.KR)([]);let p=(0,s.KR)(!1);const m=(0,s.KR)(null),_=(0,s.KR)(!1);(0,s.KR)(!1);async function b(e,t){p.value=!1,d.value=e;const a=v.value.find((t=>t.Content.Title===e));if(t)return void await u.push({name:"theater",params:{id:a.Content.Id}});const l=await g(!1);v.value=l.Content,p.value=v.value.length>0&&e.length>0}async function g(e=!0){const a=new na;return a.SelectedInfo=Ue.ContentGenres|Ue.Translations,a.Search=d.value,e&&(a.Filters=new sa,a.Filters.ContentStatuses=h(va.ContentStatus),a.Filters.ContentTypes=h(va.ContentType),a.Filters.Countries=h(va.Country)),await t.V1GetByQuery(a)}function h(e){const t=[];for(const a of i.value)a.selectableValues.forEach(((l,n)=>{n!==qa&&l&&a.type===e&&t.push(n)}));return t}async function f(e,t){const a=i.value.find((t=>t.key===e));a.isMenuDropped=!1,t===qa&&(a.selectedValue=a.key),a.selectableValues.forEach(((e,l)=>{l===t?a.selectableValues.set(l,!0):a.selectableValues.set(l,!1)})),m.value=await g(!0)}function y(e,t){e.isMenuDropped=!e.isMenuDropped,t(e.isMenuDropped)}function k(e){const t=i.value.find((t=>t.key===e)),a=[];for(const l of t.selectableValues.keys())a.push(l);return a}async function C(){m.value=await g(!0)}return(0,n.sV)((async()=>{_.value=!1,m.value=await g(),_.value=!0})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",Ha,[(0,n.Lk)("div",Oa,[(0,n.bF)(Da,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),class:"search-page__search m3-bg-1 m-radius-1",values:c.value,placeholder:"Поиск по сайту","call-updater-delay":500,"is-dropped":(0,s.R1)(p),"onChange:input":t[1]||(t[1]=(e,t)=>b(e,t)),onKeyup:(0,l.jR)(C,["enter"])},null,8,["modelValue","values","is-dropped"]),(0,n.Lk)("div",Ga,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.Wv)(ge,{key:e,modelValue:e.selectedValue,"onUpdate:modelValue":[t=>e.selectedValue=t,t=>{f(e.key,t)}],"menu-alignment":(0,s.R1)(ce).Left,"selectable-values":k(e.key),"is-dropped":e.isMenuDropped,class:"search-page__filter m3-bg-1 m-radius-circle m-border m-border-hover"},{header:(0,n.k6)((({dropMenu:t})=>[(0,n.bF)(ve,{text:e.selectedValue,"enable-menu-icon":!0,onClick:a=>y(e,t)},{"menu-icon":(0,n.k6)((()=>[(0,n.bF)(J)])),_:2},1032,["text","onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","menu-alignment","selectable-values","is-dropped"])))),128))]),_.value&&m.value.Content.length>0?((0,n.uX)(),(0,n.CE)("div",Qa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.value.Content,(e=>((0,n.uX)(),(0,n.Wv)(Ht,{key:e,content:(0,s.R1)(Ut).getContentViewModel(e)},null,8,["content"])))),128))])):_.value?((0,n.uX)(),(0,n.CE)("div",Ua," Ничего не найдено ")):(0,n.Q3)("",!0)]),(0,n.Q3)("",!0)]))}});const Za=(0,k.A)(Pa,[["__scopeId","data-v-b8346924"]]);var $a=Za;const za=e=>((0,n.Qi)("data-v-374fecc2"),e=e(),(0,n.jt)(),e),Ya={class:"profile__nickname"},Ja={class:"profile-menu__nickname headline-medium"},el={class:"headline-medium profile-menu__nickname profile-menu__nickname-tag"},tl={class:"column fit-content gap-8"},al={class:"row gap-8"},ll=za((()=>(0,n.Lk)("span",{style:{color:"#969BAB"}},"Почта",-1))),nl={class:"row gap-8"},sl=za((()=>(0,n.Lk)("span",{style:{color:"#969BAB"}},"Создано",-1))),rl=za((()=>(0,n.Lk)("div",{class:"splitter"},null,-1))),ol={class:"row row-dynamic gap-8"};var il=(0,n.pM)({__name:"ProfileMenu",props:{nickname:{type:String,required:!0},tag:{type:Number,required:!0},roles:{type:Object,required:!0},createdAt:{type:String,required:!0},email:{type:String,required:!0}},setup(e){return(t,a)=>((0,n.uX)(),(0,n.Wv)(se,{type:3,class:"profile-menu__main h__start gap-8"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Ya,[(0,n.Lk)("span",Ja,(0,r.v_)(e.nickname),1),(0,n.Lk)("b",el,"#"+(0,r.v_)(e.tag),1)]),(0,n.Lk)("div",tl,[(0,n.Lk)("div",al,[ll,(0,n.Lk)("span",null,(0,r.v_)(e.email),1)]),(0,n.Lk)("div",nl,[sl,(0,n.Lk)("span",null,(0,r.v_)(e.createdAt),1)])]),rl,(0,n.Lk)("div",ol,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.roles,(e=>((0,n.uX)(),(0,n.Wv)(ve,{key:e,class:"m3-bg-2",style:{color:"var(--primary40)"},text:e},null,8,["text"])))),128))])])),_:1}))}});const ul=(0,k.A)(il,[["__scopeId","data-v-374fecc2"]]);var dl=ul;const cl={class:"profile-avatar"},vl={class:"profile-avatar__container"},pl=["src"];var ml=(0,n.pM)({__name:"AvatarComponent",props:{src:{type:String,required:!0}},setup(e){const t=e,l=(0,s.KR)(t.src??"@/assets/images/DefaultImage.png");return(e,t)=>((0,n.uX)(),(0,n.CE)("div",cl,[(0,n.Lk)("div",vl,[(0,n.Lk)("img",{class:"profile-avatar__avatar",src:l.value,alt:"Аватар профиля",onError:t[0]||(t[0]=()=>{l.value=a(1133)})},null,40,pl)])]))}});const _l=(0,k.A)(ml,[["__scopeId","data-v-24f0b4bf"]]);var bl=_l;const gl={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15",viewBox:"0 0 16 15",fill:"none"},hl=(0,n.Lk)("path",{d:"M6.39361 2.67392C7.03568 1.07324 7.35672 0.272894 7.8783 0.16197C8.01544 0.132803 8.15719 0.132803 8.29433 0.16197C8.81591 0.272894 9.13695 1.07324 9.77902 2.67392C10.1442 3.5842 10.3267 4.03934 10.6683 4.34891C10.7642 4.43574 10.8682 4.51307 10.9789 4.57982C11.3738 4.8178 11.8666 4.86194 12.8524 4.95023C14.5212 5.09968 15.3556 5.1744 15.6104 5.65015C15.6631 5.74868 15.699 5.85536 15.7165 5.96575C15.801 6.49878 15.1876 7.05684 13.9608 8.17296L13.6201 8.4829C13.0466 9.00471 12.7598 9.26561 12.5939 9.59121C12.4944 9.78653 12.4277 9.99688 12.3965 10.2138C12.3444 10.5755 12.4283 10.954 12.5963 11.711L12.6563 11.9815C12.9575 13.339 13.1081 14.0178 12.9201 14.3514C12.7512 14.6511 12.4402 14.843 12.0966 14.8594C11.7141 14.8776 11.1751 14.4384 10.0971 13.56C9.38689 12.9813 9.03179 12.692 8.63758 12.5789C8.27733 12.4756 7.89531 12.4756 7.53506 12.5789C7.14085 12.692 6.78574 12.9813 6.07553 13.56C4.99756 14.4384 4.45857 14.8776 4.07605 14.8594C3.73245 14.843 3.4214 14.6511 3.25254 14.3514C3.06454 14.0178 3.21514 13.339 3.51634 11.9815L3.57635 11.711C3.7443 10.954 3.82828 10.5755 3.77616 10.2138C3.7449 9.99688 3.67819 9.78653 3.57869 9.59121C3.41281 9.26561 3.12604 9.00471 2.5525 8.4829L2.21182 8.17296C0.985034 7.05684 0.371639 6.49878 0.456113 5.96575C0.473608 5.85536 0.509487 5.74868 0.562259 5.65014C0.817058 5.1744 1.65144 5.09968 3.3202 4.95023C4.30599 4.86194 4.79888 4.8178 5.19372 4.57982C5.30446 4.51307 5.40848 4.43574 5.5043 4.34891C5.84591 4.03934 6.02848 3.5842 6.39361 2.67392Z",fill:"#FF776F"},null,-1),fl=[hl];function yl(e,t){return(0,n.uX)(),(0,n.CE)("svg",gl,fl)}const kl={},Cl=(0,k.A)(kl,[["render",yl]]);var wl=Cl;const Ll={Stash:"Общее",Loved:"Любимое",Planned:"В планах",Watching:"В процессе",Paused:"Отложено",Finished:"Завершено",Dropped:"Брошено"};var El;function Vl(e){return Object.keys(Ll).find((t=>Ll[t]===e))}(function(e){e[e["Stash"]=0]="Stash",e[e["Planned"]=1]="Planned",e[e["Watching"]=2]="Watching",e[e["Paused"]=3]="Paused",e[e["Finished"]=4]="Finished",e[e["Dropped"]=5]="Dropped",e[e["Loved"]=6]="Loved"})(El||(El={}));const Rl=e=>((0,n.Qi)("data-v-7fea17be"),e=e(),(0,n.jt)(),e),Il={class:"col__ profile-view__main"},Fl={class:"profile-view__avatar-container"},xl={class:"profile-middle__main"},Sl={class:"profile__favorites-header row dynamic h__space-between v__center h__padding-16"},Al=Rl((()=>(0,n.Lk)("p",{class:"title-large v__padding-8"}," Избранные ",-1))),Ml={class:"fit-content v__center gap-8"},jl=Rl((()=>(0,n.Lk)("div",{style:{width:"100%",height:"1px",background:"var(--font-gray-v1)"}},null,-1))),Kl={class:"profile__favorites-list"},Tl={class:"profile__favorite-title body-large"},Bl={class:"gap-16 row v__center"},Wl={class:"body-small m-radius-8 padding-8 fit-content m3-bg-2 m-border row gap-16"},Xl={class:"fit-content"},Nl="Категория";var Dl=(0,n.pM)({__name:"ProfileView",setup(e){const t=(0,je.rd)(),a=at(),o=U(),i=(0,n.WQ)("user-api"),u=(0,n.WQ)("favorite-api"),d={Stash:"Общее",Loved:"Любимое",Planned:"В планах",Watching:"В процессе",Paused:"Отложено",Finished:"Завершено",Dropped:"Брошено"},c=(0,s.KR)(Nl),v=(0,s.KR)(!1),p=(0,s.KR)(!1),m=(0,s.KR)(!1),_=(0,s.KR)(),b=(0,s.KR)(),g=(0,s.KR)(),f=(0,s.KR)(),y=(0,s.KR)(),k=(0,s.KR)(),C=(0,s.KR)([]),w=new Intl.DateTimeFormat("ru-RU",{hour:"2-digit",minute:"2-digit"}),L=(0,n.EW)((()=>{let e=null;return p.value?e=null:m.value?e=El.Watching:c.value!==Nl&&(e=Vl(c.value)),e}));function E(e){const t=new Date(e);return w.format(t)+" "+t.toLocaleDateString()}async function V(){console.log(L);const e=await u.getList(L.value,10,0);C.value=e.data.Favorites??[]}async function R(){try{const e=(await i.getCurrent()).onBusinessError((e=>{a.push(e.Message,tt.Error),"Unauthorized"===e.ErrorCode&&(o.LogOut(),t.push("/login"))})).onException((()=>a.push("Ошибка сервера! Попробуйте снова позже.",tt.Error)));if(!e.data)return;const l=e.data;_.value=l.User.Id,b.value=l.User.Nickname,g.value=E(l.User.CreatedAt),f.value=l.Roles.map((e=>e.Alias)),y.value=l.User.Email}catch(e){console.log(e)}}return(0,n.sV)((async()=>{if(!0!==o.loggedIn)return a.push("Сначала необходимо авторизоваться!",tt.Error),void await t.push("/login");await R(),await V()})),(e,t)=>{const a=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Il,[(0,n.Lk)("div",Fl,[(0,n.bF)(bl,{style:{overflow:"hidden"},class:"m-radius-16",src:k.value},null,8,["src"]),(0,n.bF)(a,{to:"settings"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:"theater__edit fill m-border m-radius-circle body-medium",variant:"outline"},{default:(0,n.k6)((()=>[(0,n.eW)(" Настройки ")])),_:1})])),_:1})]),(0,n.Lk)("div",xl,[(0,n.bF)(dl,{nickname:b.value,"created-at":g.value,tag:_.value,roles:f.value,email:y.value},null,8,["nickname","created-at","tag","roles","email"]),(0,n.bF)(se,{type:3,class:"column profile__favorites"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Sl,[Al,(0,n.Lk)("div",Ml,[(0,n.bF)(ve,{class:(0,r.C4)(["profile__filter m3-bg-3 fit-content m-radius-16",{"profile__filter-enabled":p.value}]),text:"Все",onClick:t[0]||(t[0]=()=>{p.value=!p.value,m.value=!1,c.value=Nl,V()})},null,8,["class"]),(0,n.bF)(ve,{class:(0,r.C4)(["profile__filter m3-bg-3 fit-content m-radius-16",{"profile__filter-enabled":m.value}]),text:"Смотрю",onClick:t[1]||(t[1]=()=>{m.value=!m.value,p.value=!1,c.value=Nl,V()})},null,8,["class"]),(0,n.bF)(ge,{modelValue:c.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>c.value=e),t[4]||(t[4]=()=>{p.value=!1,m.value=!1,v.value=!1,V()})],"is-dropped":v.value,"selectable-values":[d.Stash,d.Loved,d.Planned,d.Paused,d.Finished,d.Dropped]},{header:(0,n.k6)((()=>[(0,n.bF)(ve,{class:(0,r.C4)([{"profile__filter-enabled":c.value!==Nl},"profile__filter m3-bg-3 m-radius-16"]),text:c.value,"enable-menu-icon":!0,onClick:t[2]||(t[2]=e=>{v.value=!v.value})},{"menu-icon":(0,n.k6)((()=>[(0,n.bF)(J)])),_:1},8,["class","text"])])),_:1},8,["modelValue","is-dropped","selectable-values"])])]),jl,(0,n.Lk)("div",Kl,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(C.value,(e=>((0,n.uX)(),(0,n.Wv)(a,{key:e,class:"profile__favorites-unit gap-8 dynamic row h__space-between v__center v__padding-8",to:{name:"theater",params:{id:e.ContentId}}},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Tl,(0,r.v_)(e.Title),1),(0,n.Lk)("div",Bl,[(0,n.bo)((0,n.Lk)("div",Wl,[(0,n.bF)(wl),(0,n.Lk)("p",null,(0,r.v_)(e.Stars),1)],512),[[l.aG,e.Stars]]),(0,n.bo)((0,n.bF)(ve,{class:"body-small m3-bg-2 m-border",text:d[e.Status]},null,8,["text"]),[[l.aG,e.Status&&null===L.value]]),(0,n.Lk)("div",Xl,(0,r.v_)(E(e.CreatedAt)),1)])])),_:2},1032,["to"])))),128))])])),_:1})])])}}});const Hl=(0,k.A)(Dl,[["__scopeId","data-v-7fea17be"]]);var Ol=Hl;class Gl{static isNullOrEmpty(e){return!e||0===e.trim().length}static validateEmail(e){if(!e||0===e.length)return!1;const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)}static validateAlphanumeric(e){const t=/^[A-Za-z0-9]+$/;return t.test(e)}static getDateStr(e){const t=new Date(e),a=new Intl.DateTimeFormat("ru-RU",{hour:"2-digit",minute:"2-digit"});return a.format(t)+" "+t.toLocaleDateString()}static validateNickname(e){if(0===e.length)return!0;const t=new Set([".","/","-","_"]);for(const a of e){const e=a>="a"&&a<="z"||a>="A"&&a<="Z",l=a>="0"&&a<="9",n=t.has(a);if(!(e||l||n))return!1}return!0}}const Ql={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ul=(0,n.Lk)("path",{d:"M12 6.5C15.79 6.5 19.17 8.63 20.82 12C19.17 15.37 15.8 17.5 12 17.5C8.2 17.5 4.83 15.37 3.18 12C4.83 8.63 8.21 6.5 12 6.5ZM12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 9.5C13.38 9.5 14.5 10.62 14.5 12C14.5 13.38 13.38 14.5 12 14.5C10.62 14.5 9.5 13.38 9.5 12C9.5 10.62 10.62 9.5 12 9.5ZM12 7.5C9.52 7.5 7.5 9.52 7.5 12C7.5 14.48 9.52 16.5 12 16.5C14.48 16.5 16.5 14.48 16.5 12C16.5 9.52 14.48 7.5 12 7.5Z",fill:"currentColor"},null,-1),ql=[Ul];function Pl(e,t){return(0,n.uX)(),(0,n.CE)("svg",Ql,ql)}const Zl={},$l=(0,k.A)(Zl,[["render",Pl]]);var zl=$l;const Yl={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Jl=(0,n.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.42 2L2 3.41L5.22665 6.63665C3.34032 7.96092 1.85787 9.82309 1 12C2.73 16.39 7 19.5 12 19.5C13.7825 19.5 15.4722 19.1047 16.9871 18.3971L20.39 21.8L21.8 20.39L18.7743 17.3627C18.776 17.3615 18.7776 17.3604 18.7792 17.3592L17.3491 15.9291C17.3476 15.9301 17.346 15.9311 17.3445 15.9321L15.8079 14.3946C15.8088 14.3932 15.8096 14.3919 15.8105 14.3905L14.3293 12.9093C14.3287 12.9107 14.3282 12.9121 14.3276 12.9136L11.0877 9.67188C11.0887 9.67149 11.0897 9.67109 11.0907 9.6707L9.60952 8.18949C9.60882 8.18993 9.60813 8.19037 9.60744 8.1908L8.53923 7.12202C8.53991 7.12176 8.54059 7.12151 8.54128 7.12125L7.01968 5.59966C7.01923 5.59987 7.01878 5.60008 7.01833 5.60029L3.42 2ZM10.8165 6.56998L9.10524 4.85776C10.0314 4.62412 11.0011 4.5 12 4.5C17 4.5 21.27 7.61 23 12C22.3922 13.5422 21.471 14.9265 20.3148 16.0734L18.9109 14.6687C19.6783 13.9061 20.3262 13.0086 20.82 12C19.17 8.63 15.79 6.5 12 6.5C11.6004 6.5 11.2054 6.52367 10.8165 6.56998ZM11.7528 7.50672L16.4931 12.2497C16.4977 12.167 16.5 12.0838 16.5 12C16.5 9.52 14.48 7.5 12 7.5C11.9171 7.5 11.8346 7.50226 11.7528 7.50672ZM3.18 12C3.9816 10.3628 5.19152 9.01824 6.65841 8.06841L8.19337 9.60337C7.75436 10.2979 7.5 11.12 7.5 12C7.5 14.48 9.52 16.5 12 16.5C12.88 16.5 13.7021 16.2456 14.3966 15.8066L15.4672 16.8772C14.3834 17.2827 13.2136 17.5 12 17.5C8.2 17.5 4.83 15.37 3.18 12ZM9.5 12C9.5 11.6765 9.56153 11.3674 9.67353 11.0835L12.9165 14.3265C12.6326 14.4385 12.3235 14.5 12 14.5C10.62 14.5 9.5 13.38 9.5 12Z",fill:"currentColor"},null,-1),en=[Jl];function tn(e,t){return(0,n.uX)(),(0,n.CE)("svg",Yl,en)}const an={},ln=(0,k.A)(an,[["render",tn]]);var nn=ln;const sn=e=>((0,n.Qi)("data-v-25843f70"),e=e(),(0,n.jt)(),e),rn={class:"login-view__main"},on=sn((()=>(0,n.Lk)("p",{class:"title-large"}," Авторизация ",-1))),un={class:"login-view__input-container gap-8 h__start"},dn={class:"row h__space-between"},cn=sn((()=>(0,n.Lk)("div",null," Запомнить меня ",-1))),vn={class:"column gap-16"};var pn=(0,n.pM)({__name:"LogInView",setup(e){const t=(0,je.rd)(),a=U(),o=(0,n.WQ)("user-api"),i=at(),u=(0,s.KR)(!1),d=(0,s.KR)(!1),c=(0,s.KR)(!1),v=(0,s.KR)(!1),p=(0,s.KR)(void 0),m=(0,s.KR)(void 0);async function _(){const e="Ошибка! Не корректно введены логин или пароль!",l="Ошибка сервера! Что-то пошло не так!";b()||i.push(e,tt.Error);const n=await o.logIn(p.value,m.value,d.value);if(o.isErrorDetails(n))return void i.push(e,tt.Error);if(400===n.status)return void i.push(l,tt.Error);const s=(await o.getCurrent()).onException((()=>i.push(l,tt.Error))).onBusinessError((()=>i.push("Сначала необходимо авторизоваться!",tt.Error)));if(!s.data)return void i.push(l,tt.Error);const r=s.data;a.LogIn(r.User.Id,r.User.Nickname,r.User.Email,r.User.ImageUrl,r.Roles.map((e=>e.Alias))),await t.push("/")}function b(){return Gl.isNullOrEmpty(p.value)&&(c.value=!0),Gl.isNullOrEmpty(m.value)&&(v.value=!0),!c.value&&!v.value}return(e,t)=>{const a=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",rn,[(0,n.bF)(se,{type:2,class:"login-view__container gap-16"},{default:(0,n.k6)((()=>[on,(0,n.Lk)("div",un,[(0,n.bF)(ga,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":c.value,"place-holder":"Введите email",type:"email"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(ga,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e),class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":c.value,"place-holder":"Введите пароль",type:u.value?"text":"password"},{"end-icon":(0,n.k6)((()=>[(0,n.bF)(xa,{onClick:t[1]||(t[1]=(0,l.D$)((()=>u.value=!u.value),["stop"]))},{default:(0,n.k6)((()=>[(0,s.R1)(Gl).isNullOrEmpty(m.value)||u.value?!(0,s.R1)(Gl).isNullOrEmpty(m.value)&&u.value?((0,n.uX)(),(0,n.Wv)(zl,{key:1,class:(0,r.C4)({"login-view__icon-active":u.value,"login-view__icon-static":!u.value})},null,8,["class"])):(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(nn,{key:0,class:(0,r.C4)({"login-view__icon-active":u.value,"login-view__icon-static":!u.value})},null,8,["class"]))])),_:1})])),_:1},8,["modelValue","mark-as-invalid-input","type"])]),(0,n.Lk)("div",dn,[(0,n.bF)(L,{class:"login-view__rememberMe row gap-8 h__space-between",onClick:t[4]||(t[4]=()=>d.value=!d.value)},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),type:"checkbox"},null,512),[[l.lH,d.value]]),cn])),_:1}),(0,n.bF)(L,{class:"login-view__rememberMe"},{default:(0,n.k6)((()=>[(0,n.bF)(a,{to:"/restore"},{default:(0,n.k6)((()=>[(0,n.eW)(" Забыли пароль? ")])),_:1})])),_:1})]),(0,n.Lk)("div",vn,[(0,n.bF)(h,{class:"m-radius-circle","button-type":2,variant:"filled",onClick:(0,l.D$)(_,["stop"])},{default:(0,n.k6)((()=>[(0,n.eW)(" Войти ")])),_:1}),(0,n.bF)(h,{"button-type":3,class:"login-view__links m-border m-border-hover m-radius-circle column v__center gap-8"},{default:(0,n.k6)((()=>[(0,n.bF)(a,{to:"/reg"},{default:(0,n.k6)((()=>[(0,n.eW)(" Зарегистрироваться ")])),_:1})])),_:1})])])),_:1})])}}});const mn=(0,k.A)(pn,[["__scopeId","data-v-25843f70"]]);var _n=mn,bn=(0,n.pM)({__name:"ModalWindow",emits:["on:close"],setup(e,{emit:t}){const a=t;return(e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"modal-backdrop",onClick:t[1]||(t[1]=e=>a("on:close"))},[(0,n.Lk)("div",{class:"modal m-border m-radius-16",onClick:t[0]||(t[0]=(0,l.D$)((()=>{}),["stop"]))},[(0,n.RG)(e.$slots,"header"),(0,n.RG)(e.$slots,"body"),(0,n.RG)(e.$slots,"footer")])]))}});const gn=(0,k.A)(bn,[["__scopeId","data-v-73f684fa"]]);var hn=gn;const fn={class:"column gap-16"},yn={class:"row gap-16 v__start v__center h__space-between"},kn=(0,n.Lk)("p",{class:"h__fill title-large"}," Введите код ",-1),Cn={class:"body-medium"},wn=(0,n.Lk)("br",null,null,-1),Ln={class:"column gap-8"};var En=(0,n.pM)({__name:"EmailVerificationModal",props:{currentEmail:{type:String,required:!0},isVisible:{type:Boolean,required:!0},userToken:{type:String,required:!0}},emits:["on:close"],setup(e,{emit:t}){const a=(0,je.rd)(),o=at(),i=U(),u=(0,n.WQ)("user-api"),d=t,c=e,v=(i.email,(0,s.KR)(c.isVisible)),p=(0,s.KR)(),m=(0,s.KR)(!1);async function _(){(await u.sendMailVerifyCode(c.userToken)).onBusinessError((e=>o.push(e.Message,tt.Error))).onException((()=>o.push("Не удалось отправить код! Попробуйте еще раз!",tt.Error)))}async function b(){if(Gl.isNullOrEmpty(p.value))return void(m.value=!0);const e=(await u.verifyRegistrationCode(p.value,c.userToken)).onBusinessError((e=>o.push(e.Message,tt.Error))).onException((()=>o.push("Что-то пошло не так! Ошибка сервера!",tt.Error)));e.error||(m.value=!1,await a.push("/login"),g())}function g(){v.value=!1,d("on:close")}return(0,n.wB)((()=>c.isVisible),(e=>{v.value=e})),(e,t)=>(0,n.bo)(((0,n.uX)(),(0,n.Wv)(hn,{"onOn:close":g},{header:(0,n.k6)((()=>[(0,n.Lk)("div",fn,[(0,n.Lk)("div",yn,[kn,(0,n.bF)(xa,{onClick:g},{default:(0,n.k6)((()=>[(0,n.bF)(Ba)])),_:1})]),(0,n.Lk)("p",Cn,[(0,n.eW)(" Проверьте электронную почту "+(0,r.v_)(c.currentEmail)+",",1),wn,(0,n.eW)("мы отправили вам код подтверждения ")])])])),body:(0,n.k6)((()=>[(0,n.bF)(ga,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),class:"m-radius-8 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":m.value,"place-holder":"Код подтверждения"},null,8,["modelValue","mark-as-invalid-input"])])),footer:(0,n.k6)((()=>[(0,n.Lk)("div",Ln,[(0,n.bF)(h,{variant:"filled",class:"m-radius-8",onClick:b},{default:(0,n.k6)((()=>[(0,n.eW)(" Подтвердить ")])),_:1}),(0,n.bF)(h,{class:"m-radius-8",variant:"outline",onClick:_},{default:(0,n.k6)((()=>[(0,n.eW)(" Отправить еще раз ")])),_:1})])])),_:1},512)),[[l.aG,v.value]])}});const Vn=En;var Rn=Vn;const In=e=>((0,n.Qi)("data-v-c90e91be"),e=e(),(0,n.jt)(),e),Fn={class:"registration-view__main"},xn=In((()=>(0,n.Lk)("p",{class:"title-large"}," Регистрация ",-1))),Sn={class:"registration-view__input-container"},An={class:"registration-view__links"};var Mn=(0,n.pM)({__name:"RegistrationView",setup(e){const t=(0,n.WQ)("user-api"),a=at(),l=((0,je.rd)(),(0,s.KR)(!1)),r=(0,s.KR)(void 0),o=(0,s.KR)(!1),i=(0,s.KR)(void 0),u=(0,s.KR)(!1),d=(0,s.KR)(null),c=(0,s.KR)(null),v=(0,s.KR)(!1);let p=(0,s.KR)(null);async function m(){if(Gl.isNullOrEmpty(d.value)?(a.push("Ошибка! Не заполнены обязательные поля.",tt.Error),u.value=!0):d.value.length<10?(a.push("Ошибка! Длина пароля должна быть НЕ меньше 10 символов.",tt.Error),u.value=!0):d.value!=c.value?(a.push("Ошибка! Введенные пароли не совпадают.",tt.Error),u.value=!0):u.value=!1,Gl.validateEmail(i.value)?o.value=!1:(o.value=!0,a.push("Ошибка! Не верный формат почты.",tt.Error)),Gl.isNullOrEmpty(r.value)?(l.value=!0,a.push("Ошибка! Не заполнены обязательные поля.",tt.Error)):r.value.length<5&&r.value.length>15?(l.value=!0,a.push("Ошибка! Длина никнейма должна быть от 5 до 15 символов.",tt.Error)):Gl.validateAlphanumeric(r.value)?l.value=!1:(l.value=!0,a.push("Ошибка! Никнейм должен содержать только английские буквы и цифры.",tt.Error)),l.value||o.value||u.value)return;const e=(await t.registration(r.value,i.value,d.value)).onBusinessError((e=>a.push(e.Message,tt.Error))).onException((()=>a.push("Что-то пошло не так! Ошибка сервера!",tt.Error)));e.error||(p.value=e.data.Token,(await t.sendMailVerifyCode(p.value)).onBusinessError((e=>a.push(e.Message,tt.Error))).onException((()=>a.push("Не удалось отправить код! Попробуйте еще раз!",tt.Error))),v.value=!0)}return(e,t)=>{const a=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Fn,[(0,n.bF)(se,{type:2,class:"registration-view__container"},{default:(0,n.k6)((()=>[xn,(0,n.Lk)("div",Sn,[(0,n.bF)(ga,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),"mark-as-invalid-input":l.value,class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","place-holder":"Придумайте никнейм"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(ga,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":o.value,"place-holder":"Введите email",type:"email"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(ga,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":u.value,"place-holder":"Введите пароль",type:"password"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(ga,{modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e),class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":u.value,"place-holder":"Подтвердите пароль",type:"password"},null,8,["modelValue","mark-as-invalid-input"])]),(0,n.bF)(h,{class:"m-radius-circle h__fill","button-type":2,variant:"filled",onClick:m},{default:(0,n.k6)((()=>[(0,n.eW)(" Зарегистрировать ")])),_:1}),(0,n.Lk)("div",An,[(0,n.bF)(a,{to:"/login"},{default:(0,n.k6)((()=>[(0,n.eW)(" Войти ")])),_:1}),(0,n.bF)(a,{to:"/restore"},{default:(0,n.k6)((()=>[(0,n.eW)(" Вспомнить пароль ")])),_:1})])])),_:1}),(0,n.bF)(Rn,{"is-visible":v.value,"current-email":i.value,"user-token":(0,s.R1)(p),"onOn:close":t[4]||(t[4]=e=>{v.value=!1})},null,8,["is-visible","current-email","user-token"])])}}});const jn=(0,k.A)(Mn,[["__scopeId","data-v-c90e91be"]]);var Kn=jn;const Tn=e=>((0,n.Qi)("data-v-29c64d45"),e=e(),(0,n.jt)(),e),Bn=Tn((()=>(0,n.Lk)("path",{style:{fill:"var(--active-fill)",stroke:"var(--active-stroke)"},d:"M4.63685 13.4289L11.4583 19.5166C11.6553 19.6924 11.7538 19.7803 11.8658 19.8115C11.9536 19.836 12.0464 19.836 12.1342 19.8115C12.2462 19.7803 12.3447 19.6924 12.5417 19.5166L19.3632 13.4289C21.397 11.6139 21.6409 8.51923 19.9166 6.40794L19.7466 6.19973C17.7516 3.75702 13.902 4.18079 12.4862 6.99897C12.2853 7.39874 11.7147 7.39873 11.5138 6.99897C10.098 4.18079 6.24835 3.75702 4.25339 6.19973L4.08335 6.40794C2.35906 8.51924 2.60303 11.6139 4.63685 13.4289Z","stroke-width":"2"},null,-1))),Wn=[Bn];var Xn=(0,n.pM)({__name:"HeartSVG",props:{isSelected:{type:Boolean,required:!0}},setup(e){const t=e,a=(0,s.KR)(t.isSelected);return(0,n.wB)((()=>t.isSelected),(e=>{console.log("it changed!"),a.value=e})),(e,t)=>((0,n.uX)(),(0,n.CE)("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",class:(0,r.C4)(a.value?"selected":"not-selected")},Wn,2))}});const Nn=(0,k.A)(Xn,[["__scopeId","data-v-29c64d45"]]);var Dn=Nn;const Hn=e=>((0,n.Qi)("data-v-1876a32e"),e=e(),(0,n.jt)(),e),On={class:"content-details__title-main"},Gn={class:"content-details__title-primary"},Qn={class:"headline-medium content-details__title"},Un={class:"title-small content-details__title"},qn={class:"row row-dynamic gap-8"},Pn=Hn((()=>(0,n.Lk)("div",{class:"content-details__splitter"},null,-1))),Zn={class:"content-details__description"},$n={class:"row row-dynamic gap-8"};var zn=(0,n.pM)({__name:"TheaterDetails",props:{details:{type:Object,required:!0},isFavorite:{type:Boolean,required:!0,default:!1}},emits:["on:clickHeart"],setup(e,{emit:t}){U(),(0,n.WQ)("favorite-api");const a=e,o=t;let i=(0,s.KR)(a.isFavorite);(0,n.wB)((()=>a.isFavorite),(e=>i.value=e));const u=e=>{let t="";return e.Content.EngTitle&&(t+=e.Content.EngTitle),e.Content.OriginTitle&&(t+=""===t?e.Content.OriginTitle:" / "+e.Content.OriginTitle),t};return(t,a)=>((0,n.uX)(),(0,n.Wv)(se,{type:2,class:"material content-details__details"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",On,[(0,n.Lk)("div",Gn,[(0,n.Lk)("h1",Qn,(0,r.v_)(e.details.Content.Title),1),(0,n.bF)(Dn,{"is-selected":e.isFavorite,class:"content-details__icon-style",onClick:a[0]||(a[0]=e=>o("on:clickHeart"))},null,8,["is-selected"])]),(0,n.Lk)("h2",Un,(0,r.v_)(u(e.details)),1),(0,n.Lk)("div",qn,[(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:(0,s.R1)(ia)(e.details.Content.Type).toString()},null,8,["text"]),[[l.aG,e.details.Content.Type]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:(0,s.R1)(ca)(e.details.Content.Status).toString()},null,8,["text"]),[[l.aG,e.details.Content.Status]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:(0,s.R1)(Gt())(new Date(e.details.Content.ReleasedAt)).format("YYYY")},null,8,["text"]),[[l.aG,e.details.Content.ReleasedAt]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:e.details.Content.Country.toString()},null,8,["text"]),[[l.aG,void 0!==e.details.Content.Country]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:e.details.Content.MinAgeLimit.toString()+"+"},null,8,["text"]),[[l.aG,e.details.Content.MinAgeLimit>0]])])]),Pn,(0,n.Lk)("div",null,[(0,n.Lk)("p",Zn,(0,r.v_)(e.details.Content.Description),1)]),(0,n.bo)((0,n.Lk)("div",$n,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.details.Genres,(e=>((0,n.uX)(),(0,n.Wv)(ve,{key:e,class:"m3-bg-2",style:{color:"var(--primary40)"},text:e.Name},null,8,["text"])))),128))],512),[[l.aG,e.details.Genres?.length>0]])])),_:1}))}});const Yn=(0,k.A)(zn,[["__scopeId","data-v-1876a32e"]]);var Jn=Yn;const es=["src"];var ts=(0,n.pM)({__name:"TheaterAvatar",props:{imageId:{type:Number,required:!0},contentId:{type:Number,required:!0}},setup(e){const t=(0,n.WQ)("image-service");return(l,r)=>((0,n.uX)(),(0,n.Wv)(se,{class:"image-column__main m-radius-2",type:2},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.Lk)("img",{class:"image-column__image",src:(0,s.R1)(t).getImageLink(e.imageId,e.contentId),alt:"Изображение",onError:r[0]||(r[0]=e=>e.target.src=a(1133))},null,40,es)])])),_:1}))}});const as=(0,k.A)(ts,[["__scopeId","data-v-0038e469"]]);var ls=as;const ns={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},ss=(0,n.Lk)("path",{fill:"currentColor",d:"m12 17.27l4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72l3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41l-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18l-1.1 4.72c-.2.86.73 1.54 1.49 1.08z"},null,-1),rs=[ss];function os(e,t){return(0,n.uX)(),(0,n.CE)("svg",ns,rs)}const is={},us=(0,k.A)(is,[["render",os]]);var ds=us;const cs="Все";var vs,ps;function ms(e){return e===vs.ByNumber?ps.ByNumber:e===vs.ByNumberDescending?ps.ByNumberDescending:e===vs.ByViews?ps.ByViews:e===vs.ByStars?ps.ByStars:void 0}function _s(e){return e.map((e=>({EpisodeId:e.Id,Number:e.Number,Title:e.Title,Views:e.Views,Stars:e.Stars,HasTranslations:!!e.Translations&&e.Translations.length>0})))}function bs(e,t="Неизвестный переводчик"){return e.map((e=>({TranslatorId:e.Id,Name:null===e.Name?t:e.Name})))}(function(e){e["ByNumber"]="По возрастанию",e["ByNumberDescending"]="По убыванию",e["ByViews"]="По просмотрам",e["ByStars"]="По оценке"})(vs||(vs={})),function(e){e["ByNumber"]="ByNumber",e["ByNumberDescending"]="ByNumberDescending",e["ByStars"]="ByStars",e["ByViews"]="ByViews"}(ps||(ps={}));const gs=e=>((0,n.Qi)("data-v-49f03947"),e=e(),(0,n.jt)(),e),hs={class:"main__header-box col-gap8 row-gap4 dynamic main__margins"},fs={class:"main__title-box"},ys=gs((()=>(0,n.Lk)("h3",{class:"title-large"}," Эпизоды ",-1))),ks={class:"title-large"},Cs={class:"row col-gap16 row-gap8 dynamic"},ws={class:"main__episodes-box"},Ls={class:"box__inline main__episode-box"},Es={class:"body-large box__inline main__episode-attribute"},Vs={class:"box__inline main__episode-attribute"},Rs={key:0,class:"body-large box__inline main__episode-tag"},Is={key:1,class:"box__inline main__episode-tag"};var Fs=(0,n.pM)({__name:"TranslationsListComponentV2",props:{contentId:{type:Number,required:!0},episodes:{type:Object,required:!0},episodesTotalCount:{type:Number,required:!0,default:0},translators:{type:Object,required:!0},selectedTranslatorId:{type:Number,required:!1,default:null},sortBy:{type:String,required:!1,default:vs.ByNumber},limit:{type:Number,required:!1,default:10},offset:{type:Number,required:!1,default:0}},emits:["sort-by:update","translator:update"],setup(e,{emit:t}){const a=t,o=e,i=(0,s.KR)(o.episodes),u=(0,s.KR)(),d=(0,s.KR)();(0,n.wB)((()=>o.episodes),(e=>{i.value=e}));const c=(0,n.EW)((()=>{let e=[cs];return e=[...e,...o.translators.map((e=>e.Name)).sort()],e}));return(t,o)=>{const v=(0,n.g2)("router-link");return(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["material m-radius-2 m3-bg-1 main__box",{"material m3-bg-1 main__box-with-paging":e.episodes.length<e.offset}])},[(0,n.Lk)("div",hs,[(0,n.Lk)("div",fs,[ys,(0,n.Lk)("h4",ks,(0,r.v_)(e.offset)+" - "+(0,r.v_)(e.offset+e.episodes.length)+" / "+(0,r.v_)(e.episodes.length),1)]),(0,n.Lk)("div",Cs,[(0,n.bF)(ge,{modelValue:u.value,"onUpdate:modelValue":[o[0]||(o[0]=e=>u.value=e),o[1]||(o[1]=e=>{a("translator:update",e)})],class:"main__filter-button m-radius-1 m3-bg-3",title:"Переводчик","selectable-values":c.value},null,8,["modelValue","selectable-values"]),(0,n.bF)(ge,{modelValue:d.value,"onUpdate:modelValue":[o[2]||(o[2]=e=>d.value=e),o[3]||(o[3]=e=>{a("sort-by:update",e)})],class:"main__filter-button m-radius-1 m3-bg-3",title:"Сортировка","selectable-values":[(0,s.R1)(vs).ByNumber,(0,s.R1)(vs).ByNumberDescending,(0,s.R1)(vs).ByStars,(0,s.R1)(vs).ByViews]},null,8,["modelValue","selectable-values"])])]),(0,n.Lk)("div",ws,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(t=>((0,n.uX)(),(0,n.Wv)(v,{key:t,to:{name:"episode",params:{content:e.contentId,episode:t.EpisodeId}}},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Ls,[(0,n.Lk)("div",Es,(0,r.v_)(t.Number)+" cерия"+(0,r.v_)(t.Title?": "+t.Title:""),1),(0,n.Lk)("div",Vs,[(0,n.bo)((0,n.bF)(ve,{class:"m-border",text:"Нет перевода"},null,512),[[l.aG,!t.HasTranslations]]),t.Stars>0?((0,n.uX)(),(0,n.CE)("div",Rs,[(0,n.bF)(ds),(0,n.eW)(" "+(0,r.v_)(t.Stars),1)])):(0,n.Q3)("",!0),t.Views>0?((0,n.uX)(),(0,n.CE)("div",Is,[(0,n.bF)(zl),(0,n.eW)(" "+(0,r.v_)(t.Views),1)])):(0,n.Q3)("",!0)])])])),_:2},1032,["to"])))),128))])],2)),[[l.aG,e.episodes.length>0]])}}});const xs=(0,k.A)(Fs,[["__scopeId","data-v-49f03947"]]);var Ss=xs;class As{constructor(e,t=null,a=null,l=null){(0,o.A)(this,"ContentId",void 0),(0,o.A)(this,"EpisodeId",void 0),(0,o.A)(this,"TranslatorId",void 0),(0,o.A)(this,"OrderBy",void 0),this.ContentId=e,this.EpisodeId=t,this.TranslatorId=a,this.OrderBy=l}}const Ms={class:"material theater__main"},js={class:"column gap-16"},Ks={class:"label-large theater__tag-name"},Ts={class:"theater__tag-value"},Bs={class:"theater__body"};var Ws=(0,n.pM)({__name:"TheaterView",setup(e){const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=U(),o=(0,je.lq)(),i=(0,s.KR)(+o.params.id),u=(0,n.WQ)("content-service"),d=(0,n.WQ)("translation-service"),c=(0,n.WQ)("favorite-api");let v=(0,s.KR)();const p=(0,s.KR)(!1),m=(0,s.KR)(null),_=(0,s.KR)();let b=(0,s.KR)(null),g=[];const f={translator:(0,s.KR)(),sortBy:(0,s.KR)(vs.ByNumber)},y=(0,s.KR)(!1),k=(0,s.KR)("Добавить в избранное");async function C(){if(y.value)return await c.setStatus(i.value,null),y.value=!1,void(k.value="Добавить в избранное");await c.setStatus(i.value,El.Stash),k.value=Ll.Stash,y.value=!0}async function w(e){const t=Vl(e);await c.setStatus(i.value,t),y.value=!0}async function L(){let e=null;if(f.translator.value)if(f.translator.value===cs)e=null;else{const t=b.value.Translators.find((e=>e.Name===f.translator.value));e=t.Id}const t=new As(i.value,null,e,ms(f.sortBy.value));b.value=await d.V1GetByEpisodeAsync(t),g=_s(b.value.Episodes)}function E(e){const t=-1;return!e||e.length<=0?t:e[0].Id}async function V(){if(U().loggedIn){const e=await c.query(i.value);if(e.data&&1===e.data.Favorites.length){const t=e.data.Favorites[0];y.value=null!==t.Status,k.value=Ll[t.Status]}else y.value=!1}}function R(e){if(null==e)return new Map;const a=Math.floor(e.Content.Duration/60)>0?`${Math.floor(e.Content.Duration/60)} ч`:"",l=e.Content.Duration%60>0?e.Content.Duration%60+" мин":"",n=`${a} ${l}`,s=new Map;s.set("Серий",e.Content.OutSeries+"/"+e.Content.PlannedSeries),e.Content.Views>0&&s.set("Просмотров",e.Content.Views),e.Content.Duration&&s.set("Длительность",n);const r=Gt()(new Date(e.Content.LastUpdateAt));s.set("Обновлено",r.day()+` ${t[r.month()-1]} `+r.format("YYYY в HH:MM"));const o=Gt()(new Date(e.Content.CreatedAt));return s.set("Создано",o.day()+` ${t[o.month()-1]} `+o.format("YYYY в HH:MM")),s}return(0,n.sV)((async()=>{p.value=!1,m.value=await u.V1GetById(i.value,0),await u.incrementViews(m.value.Content.Id),_.value=R(m.value),v.value=E(m.value.Episodes),await L(),await V(),p.value=!0})),(e,t)=>{const u=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Ms,[(0,n.Lk)("div",js,[p.value&&m.value?((0,n.uX)(),(0,n.Wv)(ls,{key:0,"image-id":m.value.Content.ImageId,"content-id":m.value.Content.Id,"user-info":m.value.UserInfo},null,8,["image-id","content-id","user-info"])):(0,n.Q3)("",!0),p.value&&m.value?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(h,{key:1,class:"m-radius-circle",variant:"filled"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"body-medium",to:{name:"episode",params:{content:m.value.Content.Id,episode:(0,s.R1)(v)}}},{default:(0,n.k6)((()=>[(0,n.eW)(" Начать просмотр ")])),_:1},8,["to"])])),_:1},512)),[[l.aG,-1!==(0,s.R1)(v)]]):(0,n.Q3)("",!0),(0,n.bo)((0,n.bF)(ge,{modelValue:k.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>k.value=e),t[1]||(t[1]=async e=>await w(e))],"menu-alignment":(0,s.R1)(ce).Left,"selectable-values":[(0,s.R1)(Ll).Loved,(0,s.R1)(Ll).Planned,(0,s.R1)(Ll).Watching,(0,s.R1)(Ll).Paused,(0,s.R1)(Ll).Finished,(0,s.R1)(Ll).Dropped],class:(0,r.C4)(["m3-bg-1 fit-content m-border m-border-hover m-border-active m-radius-circle",{"theater__favorite-active":"Добавить в избранное"!==k.value}])},null,8,["modelValue","menu-alignment","selectable-values","class"]),[[l.aG,(0,s.R1)(a).loggedIn]]),(0,n.bF)(se,{class:"theater__short-box column gap-8",type:2},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(_.value,(([e,t],a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"row space-between"},[(0,n.Lk)("p",Ks,(0,r.v_)(e),1),(0,n.Lk)("p",Ts,(0,r.v_)(t),1)])))),128))])),_:1}),(0,n.bF)(h,{class:"theater__edit m-border m-radius-circle",variant:"outline"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"body-medium",to:{name:"edit-episode",params:{content:+(0,s.R1)(o).params.id}}},{default:(0,n.k6)((()=>[(0,n.eW)(" Добавить серию ")])),_:1},8,["to"])])),_:1}),(0,n.bF)(h,{class:"theater__edit m-border m-radius-circle",variant:"outline"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"body-medium",to:{name:"edit-content",params:{content:+(0,s.R1)(o).params.id}}},{default:(0,n.k6)((()=>[(0,n.eW)(" Редактировать ")])),_:1},8,["to"])])),_:1})]),(0,n.Lk)("div",Bs,[p.value?((0,n.uX)(),(0,n.Wv)(Jn,{key:0,details:m.value,"is-favorite":y.value,"onOn:clickHeart":C},null,8,["details","is-favorite"])):(0,n.Q3)("",!0),p.value?((0,n.uX)(),(0,n.Wv)(Ss,{key:1,translators:(0,s.R1)(bs)((0,s.R1)(b).Translators),"episodes-total-count":0,episodes:(0,s.R1)(g),"content-id":i.value,"onTranslator:update":t[2]||(t[2]=e=>{f.translator.value=e,L()}),"onSortBy:update":t[3]||(t[3]=e=>{f.sortBy.value=e,L()})},null,8,["translators","episodes","content-id"])):(0,n.Q3)("",!0)])])}}});const Xs=(0,k.A)(Ws,[["__scopeId","data-v-284814e5"]]);var Ns=Xs;const Ds=e=>((0,n.Qi)("data-v-0e95f74a"),e=e(),(0,n.jt)(),e),Hs={class:"restore-password__main"},Os=Ds((()=>(0,n.Lk)("img",{class:"restore-password__logo",src:d,alt:"Логотип"},null,-1))),Gs={key:0,class:"column gap-8 restore-password__input-container"},Qs={key:1,class:"column gap-8 restore-password__input-container"},Us={class:"restore-password__help label-medium m3-bg-2 m-radius-1"},qs={key:2,class:"column gap-8 restore-password__input-container"},Ps=Ds((()=>(0,n.Lk)("span",{class:"restore-password__help label-medium m3-bg-2 m-radius-1"}," Введите новый пароль ",-1))),Zs={class:"restore-password__links"};var $s=(0,n.pM)({__name:"RestorePasswordView",setup(e){const t={EmailSend:1,EmailCode:2,PasswordInputs:3},a=(0,je.rd)(),o=(0,n.WQ)("user-api"),i=at(),u=(0,s.KR)(t.EmailSend),d=(0,s.KR)(),c=(0,s.KR)(!1),v=(0,s.KR)(),p=(0,s.KR)(!1),m=(0,s.KR)(),_=(0,s.KR)(),b=(0,s.KR)(!1),g=(0,s.KR)(!1);let f;async function y(){if(Gl.isNullOrEmpty(d.value))return i.push("Ошибка! Заполните обязательное поле.",tt.Error),void(c.value=!0);if(!Gl.validateEmail(d.value))return i.push("Ошибка! Не корректный формат почты.",tt.Error),void(c.value=!0);c.value=!1;const e=(await o.sendPasswordResetCode(d.value)).onException((()=>i.push("Ошибка! Не корректный формат почты.",tt.Error))).onBusinessError((e=>i.push(e.Message,tt.Error)));e.error||(u.value=t.EmailCode)}async function k(){if(null===v.value||0===v.value)return i.push("Ошибка! Заполните обязательное поле.",tt.Error),void(p.value=!0);p.value=!1;try{const e=await o.verifyPasswordResetCode(d.value,v.value);return o.isErrorDetails(e)?void i.push(e.ErrorCode+"\n"+e.Message,tt.Error):(f=e.data.Token,void(u.value=t.PasswordInputs))}catch(e){return void i.push("Ошибка! Не корректный формат почты.",tt.Error)}}async function C(){if(Gl.isNullOrEmpty(m.value))return i.push("Ошибка! Заполните обязательные поля.",tt.Error),void(b.value=!0);if(b.value=!1,Gl.isNullOrEmpty(_.value))return i.push("Ошибка! Заполните обязательные поля.",tt.Error),void(g.value=!0);if(g.value=!1,m.value!==_.value)return i.push("Ошибка! Пароли не совпадают.",tt.Error),g.value=!0,void(b.value=!0);g.value=!1;try{return await o.resetPassword(d.value,m.value,f),i.push("Отлично! Пароль успешно сброшен.",tt.Success),void await a.push("/login")}catch(e){return void i.push(e,tt.Error)}}return(e,a)=>{const s=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Hs,[(0,n.bF)(se,{type:2,class:"restore-password__container"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{to:"/"},{default:(0,n.k6)((()=>[Os])),_:1}),u.value===t.EmailSend?((0,n.uX)(),(0,n.CE)("div",Gs,[(0,n.bF)(ga,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),class:"row m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":c.value,"place-holder":"Введите почту",type:"text"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(h,{class:"m-radius-circle","button-type":2,variant:"filled",onClick:(0,l.D$)(y,["stop"])},{default:(0,n.k6)((()=>[(0,n.eW)(" Отправить ")])),_:1})])):u.value===t.EmailCode?((0,n.uX)(),(0,n.CE)("div",Qs,[(0,n.Lk)("span",Us," Отправили код на "+(0,r.v_)(d.value),1),(0,n.bF)(ga,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":p.value,"place-holder":"Введите код",type:"number"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(h,{class:"m-radius-circle","button-type":2,variant:"filled",onClick:(0,l.D$)(k,["stop"])},{default:(0,n.k6)((()=>[(0,n.eW)(" Восстановить ")])),_:1})])):u.value===t.PasswordInputs?((0,n.uX)(),(0,n.CE)("div",qs,[Ps,(0,n.bF)(ga,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":b.value,"place-holder":"Введите пароль",type:"password"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(ga,{modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=e=>_.value=e),class:"m-radius-1 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":g.value,"place-holder":"Подтвердите пароль",type:"password"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(h,{class:"m-radius-circle","button-type":2,variant:"filled",onClick:(0,l.D$)(C,["stop"])},{default:(0,n.k6)((()=>[(0,n.eW)(" Сменить пароль ")])),_:1})])):(0,n.Q3)("",!0),(0,n.Lk)("div",Zs,[(0,n.bF)(s,{to:"/login"},{default:(0,n.k6)((()=>[(0,n.eW)(" Войти ")])),_:1}),(0,n.bF)(s,{to:"/restore"},{default:(0,n.k6)((()=>[(0,n.eW)(" Зарегистрироваться ")])),_:1})])])),_:1})])}}});const zs=(0,k.A)($s,[["__scopeId","data-v-0e95f74a"]]);var Ys=zs;const Js={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},er=(0,n.Lk)("path",{d:"M9 19L10.41 17.59L5.83 13H22V11H5.83L10.42 6.41L9 5L2 12L9 19Z",fill:"currentColor"},null,-1),tr=[er];function ar(e,t){return(0,n.uX)(),(0,n.CE)("svg",Js,tr)}const lr={},nr=(0,k.A)(lr,[["render",ar]]);var sr=nr;const rr={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},or=(0,n.Lk)("path",{d:"M15 5L13.59 6.41L18.17 11H2V13H18.17L13.58 17.59L15 19L22 12L15 5Z",fill:"currentColor"},null,-1),ir=[or];function ur(e,t){return(0,n.uX)(),(0,n.CE)("svg",rr,ir)}const dr={},cr=(0,k.A)(dr,[["render",ur]]);var vr=cr;const pr=e=>((0,n.Qi)("data-v-61de73ec"),e=e(),(0,n.jt)(),e),mr={class:"material episode__body-box gap-16"},_r={class:"episode__title-main"},br={class:"headline-medium episode__title",style:{color:"var(--primary40)"}},gr={key:1},hr={class:"title-medium episode__title"},fr={class:"episode__title-secondary dynamic"},yr={key:0,class:"episode__video-main"},kr=["src"],Cr={key:1,class:"episode__video-unavailable m-border m-radius-16 v__center h__center m3-bg-5"},wr=pr((()=>(0,n.Lk)("p",{class:"title-large"}," Видео сейчас не доступно ",-1))),Lr=[wr],Er={class:"row gap-16"},Vr={class:"title-medium row gap-8"},Rr={class:"headline-small"},Ir={class:"title-medium row gap-8"},Fr={class:"headline-small"};var xr=(0,n.pM)({__name:"EpisodeView",setup(e){const t=(0,je.lq)();let a=t.params.episode,o=t.params.content;console.log("EPISODE: "+a+"\nCONTENT: "+o);let i=+t.params.translation>0?+t.params.translation:1;const u=(0,n.WQ)("content-service"),d=(0,n.WQ)("translation-service"),c=(0,n.WQ)("episode-service"),v=(0,s.KR)(!1),p=(0,s.KR)(null),m=(0,s.KR)(null),_=(0,s.KR)(null),b=(0,s.KR)(null),g=(0,s.KR)(null),h=(0,s.KR)(null),f=(0,s.KR)(!1);let y=[];const k={translator:(0,s.KR)(),sortBy:(0,s.KR)(vs.ByNumber)};async function C(){let e=null;if(k.translator.value)if(k.translator.value===cs)e=null;else{const t=m.value.Translators.find((e=>e.Name===k.translator.value));e=t.Id}console.log(k.sortBy.value);const t=new As(o,null,e,ms(k.sortBy.value));m.value=await d.V1GetByEpisodeAsync(t),y=_s(m.value.Episodes)}async function w(){g.value=null,_.value=null;const e=new na,l=new sa;e.SelectedInfo=Ue.Episodes,l.ContentIds=new Array(o),e.Filters=l,o=t.params.content,a=t.params.episode,i=+t.params.translation>0?+t.params.translation:0,v.value=!1;const n=await u.V1GetByQuery(e);if(1!==n.Content.length){const e=new Error;throw e.message="Content not found exception",e}p.value=n.Content.find((e=>e.Content.Id==o));const s=new As(o,null,null,ps.ByNumber);m.value=await d.V1GetByEpisodeAsync(s),b.value=p.value.Episodes.find((e=>e.Id==a)),h.value=E(i,m.value.Episodes);const r=m.value.Episodes.sort((e=>e.Number));for(let t=0;t<r.length;t++){const e=r[t];e.Number===b.value.Number&&(0!=t&&(_.value=r[t-1]),t!=r.length-1&&(g.value=r[t+1]))}await L(),await c.incrementViews(a),v.value=!0}async function L(){if(h.value.Link)try{console.log(h.value.Link),await fetch(h.value.Link,{mode:"no-cors"}).then((e=>{let t=!0;e.ok&&200==e.status||(t=!1),"opaque"==e.type&&(t=!0),f.value=t})),console.log("Site status: "+f.value)}catch(e){console.log(e),f.value=!1}}function E(e,t){if(0===t.length)throw new Error("Translations not found! (1)");const l=t.find((e=>e.Id==a));if(0===l.Translations.length)throw new Error("Translations not found! (2)");if(e>0){const t=l.Translations.find((t=>t.Id===e));if(void 0!=t)return t}return l.Translations[0]}return(0,n.sV)((async()=>{await w(),await C()})),(0,n.wB)((()=>t.params.episode),(async()=>{t.params.episode&&await w()})),(e,t)=>{const a=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",mr,[v.value?((0,n.uX)(),(0,n.Wv)(se,{key:0,type:2,class:"episode__main"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",_r,[p.value?((0,n.uX)(),(0,n.Wv)(a,{key:0,to:{name:"theater",params:{id:(0,s.R1)(o)}}},{default:(0,n.k6)((()=>[(0,n.Lk)("p",br,(0,r.v_)(p.value.Content.Title),1)])),_:1},8,["to"])):(0,n.Q3)("",!0),b.value?((0,n.uX)(),(0,n.CE)("div",gr,[(0,n.Lk)("p",hr,(0,r.v_)("Серия "+b.value.Number)+(0,r.v_)(b.value.Title?": "+b.value.Title:""),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",fr,[(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:(0,s.R1)(ia)(p.value.Content.Type).toString()},null,8,["text"]),[[l.aG,p.value.Content.Type]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:(0,s.R1)(ca)(p.value.Content.Status).toString()},null,8,["text"]),[[l.aG,p.value.Content.Status]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:(0,s.R1)(Gt())(new Date(p.value.Content.ReleasedAt)).format("YYYY")},null,8,["text"]),[[l.aG,p.value.Content.ReleasedAt]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:p.value.Content.Country.toString()},null,8,["text"]),[[l.aG,void 0!==p.value.Content.Country]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:p.value.Content.MinAgeLimit.toString()+"+"},null,8,["text"]),[[l.aG,p.value.Content.MinAgeLimit>0]]),(0,n.bo)((0,n.bF)(ve,{class:"m3-bg-2",style:{color:"var(--primary40)"},text:p.value.Genres[0]?.Name},null,8,["text"]),[[l.aG,p.value.Genres?.length>0]])])]),h.value?((0,n.uX)(),(0,n.CE)("div",yr,[f.value?((0,n.uX)(),(0,n.CE)("iframe",{key:0,class:"episode__player",src:h.value.Link,frameborder:"0",allow:"autoplay; encrypted-media; fullscreen; picture-in-picture",allowfullscreen:""},null,8,kr)):((0,n.uX)(),(0,n.CE)("div",Cr,Lr))])):(0,n.Q3)("",!0)])),_:1})):(0,n.Q3)("",!0),(0,n.bo)((0,n.Lk)("div",Er,[_.value?((0,n.uX)(),(0,n.Wv)(a,{key:0,class:"episode__move-button m-radius-16 column gap-8",to:{name:"episode",params:{content:(0,s.R1)(o),episode:_.value.Id}}},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Vr,[(0,n.bF)(sr),(0,n.eW)(" Предыдущий эпизод ")]),(0,n.Lk)("div",Rr," Серия "+(0,r.v_)(_.value.Number)+(0,r.v_)(_.value.Title?": "+_.value.Title:""),1)])),_:1},8,["to"])):(0,n.Q3)("",!0),g.value?((0,n.uX)(),(0,n.Wv)(a,{key:1,class:"episode__move-button m-radius-16 column gap-8",to:{name:"episode",params:{content:(0,s.R1)(o),episode:g.value.Id}}},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Ir,[(0,n.eW)(" Следующий эпизод "),(0,n.bF)(vr)]),(0,n.Lk)("div",Fr," Серия "+(0,r.v_)(g.value.Number)+(0,r.v_)(g.value.Title?": "+g.value.Title:""),1)])),_:1},8,["to"])):(0,n.Q3)("",!0)],512),[[l.aG,_.value||g.value]]),v.value?((0,n.uX)(),(0,n.Wv)(Ss,{key:1,"content-id":(0,s.R1)(o),episodes:(0,s.R1)(y),"episodes-total-count":0,translators:(0,s.R1)(bs)(m.value?.Translators??[]),"selected-translator-id":(0,s.R1)(i),"onSortBy:update":t[0]||(t[0]=e=>{k.sortBy.value=e,C()}),"onTranslator:update":t[1]||(t[1]=e=>{k.translator.value=e,C()})},null,8,["content-id","episodes","translators","selected-translator-id"])):(0,n.Q3)("",!0)])}}});const Sr=(0,k.A)(xr,[["__scopeId","data-v-61de73ec"]]);var Ar,Mr=Sr;(function(e){e[e["Edits"]=2]="Edits",e[e["CreateContent"]=3]="CreateContent",e[e["CreateEpisode"]=4]="CreateEpisode",e[e["EditContent"]=5]="EditContent",e[e["EditEpisode"]=6]="EditEpisode"})(Ar||(Ar={}));const jr={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Kr=(0,n.Lk)("path",{d:"M9.17 6L11.17 8H20V18H4V6H9.17ZM10 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z",fill:"currentColor"},null,-1),Tr=[Kr];function Br(e,t){return(0,n.uX)(),(0,n.CE)("svg",jr,Tr)}const Wr={},Xr=(0,k.A)(Wr,[["render",Br]]);var Nr=Xr;const Dr={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Hr=(0,n.Lk)("path",{d:"M13 11H11V14H8V16H11V19H13V16H16V14H13V11ZM14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z",fill:"currentColor"},null,-1),Or=[Hr];function Gr(e,t){return(0,n.uX)(),(0,n.CE)("svg",Dr,Or)}const Qr={},Ur=(0,k.A)(Qr,[["render",Gr]]);var qr=Ur;const Pr={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zr=(0,n.Lk)("path",{d:"M4 6H2V20C2 21.1 2.9 22 4 22H18V20H4V6ZM20 2H8C6.9 2 6 2.9 6 4V16C6 17.1 6.9 18 8 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H8V4H20V16ZM13 14H15V11H18V9H15V6H13V9H10V11H13V14Z",fill:"currentColor"},null,-1),$r=[Zr];function zr(e,t){return(0,n.uX)(),(0,n.CE)("svg",Pr,$r)}const Yr={},Jr=(0,k.A)(Yr,[["render",zr]]);var eo=Jr;const to={class:"material settings-nav__container"},ao={class:"settings-nav__category"},lo={class:"settings-nav__label row gap-12 padding-8"},no={class:"text__one-line"};var so=(0,n.pM)({__name:"SettingsNavigation",props:{current:{type:Ar,required:!0}},setup(e){const t=e,a=(0,s.KR)(window.innerWidth),o=(0,s.KR)(t.current),i=(0,n.EW)((()=>a.value<=720));(0,n.wB)((()=>t.current),(e=>{o.value=e}));const u=()=>{a.value=window.innerWidth};return(0,n.sV)((()=>{window.addEventListener("resize",u)})),(0,n.xo)((()=>{window.removeEventListener("resize",u)})),(e,t)=>{const a=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",to,[(0,n.Lk)("div",ao,[(0,n.Lk)("div",lo,[(0,n.bF)(Me)]),(0,n.bF)(a,{class:(0,r.C4)([{"settings-nav__button-selected":o.value===(0,s.R1)(Ar).Edits},"settings-nav__button m-radius-circle"]),to:"/edit/list"},{default:(0,n.k6)((()=>[(0,n.bF)(Nr),(0,n.bo)((0,n.Lk)("div",no," Изменения ",512),[[l.aG,!i.value]])])),_:1},8,["class"]),(0,n.bF)(a,{class:(0,r.C4)([{"settings-nav__button-selected":o.value===(0,s.R1)(Ar).EditContent||o.value===(0,s.R1)(Ar).CreateContent},"settings-nav__button m-radius-circle"]),to:{name:"create-content"}},{default:(0,n.k6)((()=>[(0,n.bF)(qr),(0,n.bo)((0,n.Lk)("div",null," Добавить контент ",512),[[l.aG,!i.value]])])),_:1},8,["class"]),(0,n.bF)(a,{class:(0,r.C4)([{"settings-nav__button-selected":o.value===(0,s.R1)(Ar).EditEpisode||o.value===(0,s.R1)(Ar).CreateEpisode},"settings-nav__button m-radius-circle"]),to:{name:"create-episode"}},{default:(0,n.k6)((()=>[(0,n.bF)(eo),(0,n.bo)((0,n.Lk)("div",null," Добавить эпизод ",512),[[l.aG,!i.value]])])),_:1},8,["class"])])])}}});const ro=(0,k.A)(so,[["__scopeId","data-v-5db863ca"]]);var oo=ro;const io={class:"time-picker__box"},uo={key:0,class:"time-picker__label"};var co=(0,n.pM)({__name:"TimePicker",props:{label:{type:String,required:!1,default:null},modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,o=e;function i(e){a("update:modelValue",e)}const u=(0,s.KR)(o.modelValue);return(0,n.wB)((()=>o.modelValue),(e=>{u.value=e})),(t,a)=>((0,n.uX)(),(0,n.CE)("div",io,[e.label?((0,n.uX)(),(0,n.CE)("label",uo,(0,r.v_)(e.label),1)):(0,n.Q3)("",!0),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),type:"time",class:"material time-picker",onInput:a[1]||(a[1]=e=>i(u.value))},null,544),[[l.Jo,u.value]])]))}});const vo=(0,k.A)(co,[["__scopeId","data-v-2a9c0749"]]);var po=vo;const mo={class:"input__box"},_o={key:0,class:"input__label"};var bo=(0,n.pM)({__name:"DatePicker",props:{label:{type:String,required:!1,default:null},modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,o=e,i=(0,s.KR)(o.modelValue);function u(e){a("update:modelValue",e)}return(0,n.wB)((()=>o.modelValue),(e=>{i.value=e})),(t,a)=>((0,n.uX)(),(0,n.CE)("div",mo,[e.label?((0,n.uX)(),(0,n.CE)("label",_o,(0,r.v_)(e.label),1)):(0,n.Q3)("",!0),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),type:"date",class:"material input",onInput:a[1]||(a[1]=e=>u(e.target.value))},null,544),[[l.Jo,i.value]])]))}});const go=(0,k.A)(bo,[["__scopeId","data-v-1a605816"]]);var ho=go;const fo={key:0,class:"textarea__label"},yo=["value","placeholder"];var ko=(0,n.pM)({__name:"BaseTextArea",props:{label:{type:String,required:!1,default:null},modelValue:{type:String,default:""},markAsInvalidInput:{type:Boolean,default:!1},placeholder:{type:String,default:null}},emits:["update:modelValue"],setup(e){return(t,a)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["textarea__box m-radius-1",{"textarea__invalid-box":e.markAsInvalidInput}])},[e.label?((0,n.uX)(),(0,n.CE)("label",fo,(0,r.v_)(e.label),1)):(0,n.Q3)("",!0),(0,n.Lk)("textarea",{value:e.modelValue,class:"textarea__text-area body-medium material textarea__text-area",placeholder:e.placeholder,onInput:a[0]||(a[0]=e=>t.$emit("update:modelValue",e.target.value))},null,40,yo)],2))}});const Co=(0,k.A)(ko,[["__scopeId","data-v-49001d58"]]);var wo=Co;a(4603),a(7566),a(8721);const Lo=(0,n.Fv)('<svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.1" d="M3 12C3 4.5885 4.5885 3 12 3C19.4115 3 21 4.5885 21 12C21 19.4115 19.4115 21 12 21C4.5885 21 3 19.4115 3 12Z" fill="#323232"></path><path d="M3 12C3 4.5885 4.5885 3 12 3C19.4115 3 21 4.5885 21 12C21 19.4115 19.4115 21 12 21C4.5885 21 3 19.4115 3 12Z" stroke="#323232" stroke-width="2"></path><path d="M12 8L12 16" stroke="#323232" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 11L12.087 8.08704V8.08704C12.039 8.03897 11.961 8.03897 11.913 8.08704V8.08704L9 11" stroke="#323232" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',1),Eo=[Lo];function Vo(e,t){return(0,n.uX)(),(0,n.CE)("div",null,Eo)}const Ro={},Io=(0,k.A)(Ro,[["render",Vo]]);var Fo=Io;const xo={class:"column image-input__box image-input v__center h__center"};var So=(0,n.pM)({__name:"BaseImageInput",emits:["on:update"],setup(e,{emit:t}){const a=t,l=(0,s.KR)(null);function r(e){l.value=URL.createObjectURL(e.target.files[0]),a("on:update",e.target.files[0],l.value)}return(e,t)=>((0,n.uX)(),(0,n.CE)("label",xo,[(0,n.bF)(Fo),(0,n.Lk)("input",{ref:"image",type:"file",accept:".jpg, .jpeg, .png",alt:"Выберите изображение",style:{display:"none"},onChange:r},null,544),(0,n.eW)(" Выберите изображение ")]))}});const Ao=So;var Mo=Ao;const jo=e=>((0,n.Qi)("data-v-02959223"),e=e(),(0,n.jt)(),e),Ko={class:"content-edit__right-box m-radius-16"},To=jo((()=>(0,n.Lk)("h3",{class:"title-large content-edit__header"}," Основная информация ",-1))),Bo={class:"content-edit__unit-box"},Wo=jo((()=>(0,n.Lk)("div",{class:"content-edit__details"},[(0,n.Lk)("p",{class:"body-large"}," Изображение "),(0,n.Lk)("label",{class:"body-medium"},"Выберите изображение для главной страницы содержимого")],-1))),Xo={class:"content-edit__images-box fit-content row gap-16"},No=["src"],Do=["src"],Ho={class:"content-edit__unit-box"},Oo={class:"content-edit__box-activities-column"},Go={class:"content-edit__box-activities row gap-16"},Qo=jo((()=>(0,n.Lk)("p",{class:"body-large"}," Название* ",-1))),Uo=jo((()=>(0,n.Lk)("p",{class:"body-large"}," Статус* ",-1))),qo={class:"content-edit__buttons-rowed"},Po={class:"content-edit__unit-box"},Zo={class:"content-edit__box-activities"},$o=jo((()=>(0,n.Lk)("p",{class:"body-large"}," Страна* ",-1))),zo=jo((()=>(0,n.Lk)("label",{class:"body-large"}," Тип дорамы* ",-1))),Yo={class:"content-edit__unit-box"},Jo=jo((()=>(0,n.Lk)("div",{class:"content-edit__details"},[(0,n.Lk)("p",{class:"body-large"}," Описание* ")],-1))),ei={class:"content-edit__unit-box"},ti=jo((()=>(0,n.Lk)("div",{class:"content-edit__details"},[(0,n.Lk)("p",{class:"body-large"}," Жанры "),(0,n.Lk)("label",{class:"body-medium"},[(0,n.eW)(" * Подсказка: детектив, драма, триллер"),(0,n.Lk)("br"),(0,n.eW)(" * Вводите жанры через пробел ")])],-1))),ai={class:"column gap-8"},li={class:"content-edit__genres-selected row gap-8"},ni={class:"content-edit__unit-box"},si=jo((()=>(0,n.Lk)("div",{class:"content-edit__box-activities"},[(0,n.Lk)("p",{class:"body-large"}," Длительность эпизода "),(0,n.Lk)("p",{class:"body-large"}," Дата релиза ")],-1))),ri={class:"content-edit__box-activities"},oi={class:"content-edit__unit-box"},ii=jo((()=>(0,n.Lk)("div",{class:"content-edit__box-activities"},[(0,n.Lk)("p",{class:"body-large"}," Планируемое количество серий "),(0,n.Lk)("p",{class:"body-large"}," Возрастное ограничение ")],-1))),ui={class:"content-edit__box-activities"},di={class:"content-edit__buttons-box"};var ci=(0,n.pM)({__name:"ContentEditorComponent",props:{contentId:{type:Object,required:!1,default:void 0}},setup(e){const t=e,r=(0,s.KR)(!1),o=(0,s.KR)(!1),i=(0,n.WQ)("content-service"),u=(0,n.WQ)("image-service"),d=(0,n.WQ)("changes-history-service"),c=(0,n.WQ)("genre-service"),v=U(),p=at();let m,_=(0,s.KR)();const b=(0,s.KR)(null),g=(0,s.KR)(null),f=(0,s.KR)(null),y=(0,s.KR)(null),k=(0,s.KR)(null),C=(0,s.KR)(null),w=(0,s.KR)(null),E=(0,s.KR)(null),V=(0,s.KR)(null),R=(0,s.KR)([]),I=(0,s.KR)(null),F=(0,s.KR)(null),x=(0,s.KR)(null),S=(0,s.KR)(null),A=(0,s.KR)(null);function M(e){let t=new Date(e),a=""+(t.getMonth()+1),l=""+t.getDate(),n=t.getFullYear();return a=j(a),l=j(l),[n,a,l].join("-")}function j(e){return(e<10?"0":"")+e}(0,n.sV)((async()=>{if(t.contentId&&t.contentId>0){const e=await i.V1GetById(t.contentId,0);g.value=u.getImageLink(e.Content.ImageId,e.Content.Id),b.value=e.Content.ImageId,f.value=e.Content.Title,E.value=e.Content.Type,V.value=e.Content.Status,R.value=e.Genres.map((e=>e.Name)),w.value=e.Content.Country,C.value=e.Content.Description,I.value=j(Math.trunc(e.Content.Duration/60))+":"+e.Content.Duration%60,y.value=e.Content.EngTitle,S.value=e.Content.MinAgeLimit,k.value=e.Content.OriginTitle,x.value=e.Content.PlannedSeries,F.value=M(e.Content.ReleasedAt),A.value=null,r.value=(y.value?.length??0)>0,o.value=(k?.value?.length??0)>0}}));const K=(0,s.KR)({Title:!1,Description:!1,Country:!1,ContentType:!1,ContentStatus:!1}),T=(0,s.KR)(""),B=(0,s.KR)([]),W=(0,n.EW)((()=>B.value.map((e=>e.Name)))),X=(0,s.KR)(!1);async function N(e,t){if(t){const t=R.value.find((t=>t===e));t||R.value.push(e),T.value="",B.value=[]}else{if(Gl.isNullOrEmpty(e))return void(X.value=!1);const t=await c.Query({Search:e,GenreIds:void 0,Names:void 0,Limit:5,Offset:void 0});T.value=e,B.value=t.Genres,B.value.length>0&&(X.value=!0)}}function D(e){R.value=R.value.filter((t=>t!==e))}const H=e=>{if(!e)return null;const t=e.split(":"),a=parseInt(t[0]),l=parseInt(t[1]);return 60*a+l};async function O(){const e={ImageId:b.value,Channel:A.value,ContentStatus:V.value,ContentType:E.value,Country:w.value,Description:C.value,Duration:H(I.value),EngTitle:y.value,Genres:R.value,MinAge:S.value,OriginalTitle:k.value,PlannedSeries:x.value,ReleasedAt:F.value,Title:f.value};if(Q(e))try{const a=await d.createContentChange({ChangeableFields:e,ContentId:t.contentId>0?t.contentId:0,CreatedBy:v.loggedIn?v.userId:0});null!=m&&await u.insertImage(t.contentId??null,a.HistoryId,m),p.push("Успех! Заявка на добавление изменений создано.",tt.Success)}catch(a){p.push("Ошибка! Неизвестная ошибка сервера.",tt.Error)}else p.push("Ошибка! Заполните обязательные поля.",tt.Error)}async function G(e,t){m=e,_.value=t}function Q(e){const t=e=>null!=e&&""!=e.trim();let a=!0;const l=K.value;return l.Title=!t(e.Title),l.Description=!t(e.Description),l.Country=null===e.Country||e.Country===Qt.Null,l.ContentType=null===e.ContentType,l.ContentStatus=null===e.ContentStatus,(l.Title||l.Description||l.Country||l.ContentType||l.ContentStatus)&&(a=!1),a}return(e,t)=>((0,n.uX)(),(0,n.CE)("div",Ko,[To,(0,n.Lk)("div",Bo,[Wo,(0,n.Lk)("div",Xo,[(0,n.bF)(Mo,{class:"m3-bg-2 column h__center","onOn:update":G}),(0,s.R1)(_)?((0,n.uX)(),(0,n.CE)("img",{key:0,class:"m-radius-8 m-border",style:{height:"300px",width:"auto","object-fit":"cover"},src:(0,s.R1)(_),alt:"Выбранное изображение"},null,8,No)):(0,n.Q3)("",!0),g.value?((0,n.uX)(),(0,n.CE)("img",{key:1,class:"m-radius-8 m-border",style:{height:"300px",width:"auto","object-fit":"cover"},src:g.value,alt:"Обложка контента",onError:t[0]||(t[0]=e=>e.target.src=a(1133))},null,40,Do)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Ho,[(0,n.Lk)("div",Oo,[(0,n.Lk)("div",Go,[Qo,Uo,(0,n.bF)(ga,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e),class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active","mark-as-invalid-input":K.value.Title,"place-holder":"Введите русское название*"},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(ge,{modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active","mark-as-invalid-input":K.value.ContentStatus,title:"Выберите статус","selectable-values":[(0,s.R1)(ua).Announced,(0,s.R1)(ua).Ongoing,(0,s.R1)(ua).Stopped,(0,s.R1)(ua).Finished]},null,8,["modelValue","mark-as-invalid-input","selectable-values"])]),(0,n.bo)((0,n.bF)(ga,{modelValue:y.value,"onUpdate:modelValue":t[3]||(t[3]=e=>y.value=e),class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active","place-holder":"Введите английское название"},null,8,["modelValue"]),[[l.aG,r.value]]),(0,n.bo)((0,n.bF)(ga,{modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=e=>k.value=e),class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active","place-holder":"Введите оригинальное название"},null,8,["modelValue"]),[[l.aG,o.value]]),(0,n.Lk)("div",qo,[(0,n.bo)((0,n.bF)(L,{class:"material m-radius-circle content-edit__text-button",onClick:t[5]||(t[5]=()=>r.value=!r.value)},{default:(0,n.k6)((()=>[(0,n.eW)(" Добавить английское название ")])),_:1},512),[[l.aG,!r.value]]),(0,n.bo)((0,n.bF)(L,{class:"material m-radius-circle content-edit__text-button",onClick:t[6]||(t[6]=()=>o.value=!o.value)},{default:(0,n.k6)((()=>[(0,n.eW)(" Добавить оригинальное название ")])),_:1},512),[[l.aG,!o.value]])])])]),(0,n.Lk)("div",Po,[(0,n.Lk)("div",Zo,[$o,zo,(0,n.bF)(ge,{modelValue:w.value,"onUpdate:modelValue":t[7]||(t[7]=e=>w.value=e),class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active","mark-as-invalid-input":K.value.Country,title:"Выберите страну","selectable-values":[(0,s.R1)(Qt).Japan,(0,s.R1)(Qt).China,(0,s.R1)(Qt).Korea]},null,8,["modelValue","mark-as-invalid-input","selectable-values"]),(0,n.bF)(ge,{modelValue:E.value,"onUpdate:modelValue":t[8]||(t[8]=e=>E.value=e),class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active","mark-as-invalid-input":K.value.ContentType,title:"Выберите тип","selectable-values":[(0,s.R1)(ra).Serial,(0,s.R1)(ra).Film,(0,s.R1)(ra).Show,(0,s.R1)(ra).Documentary]},null,8,["modelValue","mark-as-invalid-input","selectable-values"])])]),(0,n.Lk)("div",Yo,[Jo,(0,n.bF)(wo,{modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=e=>C.value=e),class:"content-edit__description-input body-medium content-edit__bg m-radius-1 m-border m-border-hover m-border-active",placeholder:"Введите описание","mark-as-invalid-input":K.value.Description},null,8,["modelValue","mark-as-invalid-input"])]),(0,n.Lk)("div",ei,[ti,(0,n.bo)((0,n.Lk)("div",ai,[(0,n.Lk)("div",li,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(R.value,(e=>((0,n.uX)(),(0,n.Wv)(ve,{key:e,class:"m3-bg-3 m-border m-radius-circle",text:e,"enable-menu-icon":!0,onClick:t=>D(e)},{"menu-icon":(0,n.k6)((()=>[(0,n.bF)(Ba)])),_:2},1032,["text","onClick"])))),128))])],512),[[l.aG,R.value?.length>0]]),(0,n.bF)(Da,{class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active",placeholder:"Введите имя жанра","menu-alignment":(0,s.R1)(ce).Left,"show-loop-icon":!1,values:W.value,input:T.value,"call-updater-delay":500,"is-dropped":X.value,"onChange:input":N},null,8,["menu-alignment","values","input","is-dropped"])]),(0,n.Lk)("div",ni,[si,(0,n.Lk)("div",ri,[(0,n.bF)(po,{modelValue:I.value,"onUpdate:modelValue":[t[10]||(t[10]=e=>I.value=e),t[11]||(t[11]=e=>I.value=e)],class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active"},null,8,["modelValue"]),(0,n.bF)(ho,{modelValue:F.value,"onUpdate:modelValue":[t[12]||(t[12]=e=>F.value=e),t[13]||(t[13]=e=>console.log(e))],class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active"},null,8,["modelValue"])])]),(0,n.Lk)("div",oi,[ii,(0,n.Lk)("div",ui,[(0,n.bF)(ga,{modelValue:x.value,"onUpdate:modelValue":t[14]||(t[14]=e=>x.value=e),type:"number","place-holder":"Введите число",class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active","input-validator":e=>e>=0},null,8,["modelValue","input-validator"]),(0,n.bF)(ga,{modelValue:S.value,"onUpdate:modelValue":t[15]||(t[15]=e=>S.value=e),type:"number","place-holder":"Введите число",class:"content-edit__bg m-radius-1 m-border m-border-hover m-border-active","input-validator":e=>e>=0&&e<=20},null,8,["modelValue","input-validator"])])]),(0,n.Lk)("div",di,[(0,n.bF)(h,{class:"material m-radius-circle",variant:"filled",onClick:O},{default:(0,n.k6)((()=>[(0,n.eW)(" Отправить ")])),_:1}),(0,n.bF)(h,{variant:"outline",class:"material m-border m-radius-circle"},{default:(0,n.k6)((()=>[(0,n.eW)(" Сбросить ")])),_:1})])]))}});const vi=(0,k.A)(ci,[["__scopeId","data-v-02959223"]]);var pi=vi;const mi={Original:"Original",Subtitles:"Subtitles",AutoSubtitles:"AutoSubtitles",VoiceActing:"VoiceActing"},_i={Korean:"Korean",Chinese:"Chinese",Japanese:"Japanese",Russian:"Russian",English:"English"},bi={"720p":720,"1080p":1080,"1440p":1440,"2160p":2160},gi=e=>((0,n.Qi)("data-v-7f0f78b2"),e=e(),(0,n.jt)(),e),hi={class:"edit-episode__right-box m-radius-16"},fi=gi((()=>(0,n.Lk)("h3",{class:"title-large edit-episode__page-header"}," Основная информация ",-1))),yi={class:"edit-episode__unit-box"},ki={class:"edit-episode__box-activities"},Ci=gi((()=>(0,n.Lk)("p",{class:"body-large"}," Дорама* ",-1))),wi=gi((()=>(0,n.Lk)("p",{class:"body-large"}," Серия* ",-1))),Li={class:"edit-episode__unit-box"},Ei={class:"edit-episode__box-activities"},Vi=gi((()=>(0,n.Lk)("p",{class:"body-large"}," Язык перевода* ",-1))),Ri=gi((()=>(0,n.Lk)("p",{class:"body-large"}," Тип перевода* ",-1))),Ii={class:"edit-episode__unit-box"},Fi={class:"edit-episode__box-activities"},xi=gi((()=>(0,n.Lk)("p",{class:"body-large"}," Переводчик ",-1))),Si=gi((()=>(0,n.Lk)("p",{class:"body-large"}," Качество видео ",-1))),Ai={class:"edit-episode__unit-box gap-8"},Mi={class:"column gap-8"},ji=gi((()=>(0,n.Lk)("div",{class:"edit-episode__details"},[(0,n.Lk)("p",{class:"body-large"}," Скрипт видео* ")],-1))),Ki={class:"edit-episode__video-box m3-bg-5 column gap-8 m-radius-1"},Ti=["src"],Bi=gi((()=>(0,n.Lk)("div",{class:"edit-episode__video-recommendation m-border m-radius-1"},[(0,n.Lk)("p",null,"Убедитесь, что видео показывается и корректно работает.")],-1))),Wi={class:"edit-episode__buttons-box"};var Xi=(0,n.pM)({__name:"EpisodeEditorComponent",props:{contentId:{type:Number,required:!0,default:null},episodeId:{type:Number,required:!0,default:null}},setup(e){const t=e,a=(0,n.WQ)("changes-history-service"),l=(0,n.WQ)("content-service"),r=(0,n.WQ)("episode-service"),o=(0,n.WQ)("translator-service"),i=at();(0,n.sV)((async()=>{if(t.contentId){const e=await l.V1GetById(t.contentId,0);u.value=[{ContentId:e.Content.Id,Title:e.Content.Title}],v.value=e.Content.Title,c.value=e.Content.Title}if(t.episodeId&&t.contentId){const e=new Je;e.EpisodeIds=[t.episodeId],e.ContentIds=[t.contentId],e.Limit=1;const a=await r.query(e);if(a?.length>0){const e=a[0];b.value=e.Title,m.value=[e.Title]}}}));let u=(0,s.KR)([]);const d=(0,s.KR)(!1),c=(0,s.KR)(""),v=(0,s.KR)(""),p=(0,s.KR)(!1),m=(0,s.KR)([]),_=(0,s.KR)(!1),b=(0,s.KR)("");let g=[];const f=(0,s.KR)([]),y=(0,s.KR)(""),k=(0,s.KR)(""),C=(0,s.KR)(!1),w=(0,s.KR)(""),L=(0,s.KR)(!1),E=[mi.Subtitles,mi.AutoSubtitles,mi.Original,mi.VoiceActing],V=(0,s.KR)(),R=(0,s.KR)(),I=(0,s.KR)(!1),F=[_i.Russian,_i.English,_i.Korean,_i.Chinese,_i.Japanese],x=(0,s.KR)(),S=(0,s.KR)(""),A=(0,s.KR)(!1);function M(){x.value=j(S.value),x.value||(A.value=!0,i.push("Ошибка! Не удалось вывести видео.",tt.Error))}function j(e){if(e.startsWith("<iframe")&&e.endsWith("</iframe>")){const t=new DOMParser,a=t.parseFromString(e,"text/html");return a.documentElement.querySelector("parsererror")?K(e):a.getElementsByTagName("iframe")[0].src}return console.log("link"),K(e)}function K(e){const t=e.match(/(http(s)?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);return null!==t&&t.length>0?t[0]:null}async function T(){const e=e=>null!=e&&""!=e.trim();if(d.value=!e(v.value),_.value=!e(b.value)||d.value,I.value=!e(R.value),L.value=!e(w.value),A.value=!e(x.value),d.value||_.value||L.value||I.value||A.value)i.push("Ошибка! Заполните обязательные поля.",tt.Error);else{console.log(V.value);const e=u.value.find((e=>e.Title===v.value)),t=b.value,l=R.value,n=w.value,s=V.value?V.value:null;let r=null;k.value&&(r=g.find((e=>e.Name===k.value))?.TranslatorId??null);const o=await a.createEpisodeChange({ChangeableFields:{Number:t,VideoScript:x.value,Language:l,TranslationType:n,EpisodeId:null,TranslatorId:r,TranslatorName:y.value,Quality:s},ContentId:e.ContentId,CreatedBy:0});o.ok?i.push("Успех! Данные отправлены. За их статусом можно следить на странице с обновлениями.",tt.Success):i.push("Ошибка! Что-то пошло не так в момент отправки данных, попробуйте еще раз через некоторое время.",tt.Error)}}async function B(e,t){if(C.value=!1,v.value=t?e:void 0,0===e.length)return u.value=[],void(p.value=!1);if(t){const t=u.value.find((t=>t.Title===e)),a=new Je;a.ContentIds=[t.ContentId];const l=await r.query(a);return void(m.value=l.map((e=>e.Number.toString())))}m.value=[];const a=(await l.searchBy(e)).Units;u.value=a.map((e=>({Title:e.Title,ContentId:e.ContentId}))),u.value.length>0&&(p.value=!0)}async function W(e,t){if(y.value=e,k.value=t?e:void 0,0===e.length)return g=[],void(C.value=!1);const a=await o.query({Limit:7,Offset:null,Search:e,TranslatorIds:null});f.value=a.Translators.map((e=>e.Name)),g=a.Translators,f.value.length>0&&(C.value=!0)}return(e,t)=>((0,n.uX)(),(0,n.CE)("div",hi,[fi,(0,n.Lk)("div",yi,[(0,n.Lk)("div",ki,[Ci,wi,(0,n.bF)(Da,{input:c.value,class:"edit-episode__bg m-radius-1 m-border m-border-hover m-border-active",placeholder:"Выберите дораму",values:(0,s.R1)(u).map((e=>e.Title)),"is-invalid":d.value,"is-dropped":p.value,"call-updater-delay":500,"onChange:input":B},null,8,["input","values","is-invalid","is-dropped"]),(0,n.bF)(ga,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),class:"edit-episode__bg m3-bg-1 m-radius-1 m-border m-border-hover m-border-active","mark-as-invalid-input":_.value,"place-holder":"Выберите серию",type:"number"},null,8,["modelValue","mark-as-invalid-input"])])]),(0,n.Lk)("div",Li,[(0,n.Lk)("div",Ei,[Vi,Ri,(0,n.bF)(ge,{modelValue:R.value,"onUpdate:modelValue":t[1]||(t[1]=e=>R.value=e),class:"edit-episode__bg m-radius-1 m-border m-border-hover m-border-active",title:"Выберите язык","mark-as-invalid-input":I.value,"selectable-values":F},null,8,["modelValue","mark-as-invalid-input"]),(0,n.bF)(ge,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=e=>w.value=e),class:"edit-episode__bg m-radius-1 m-border m-border-hover m-border-active",title:"Выберите тип перевода","is-disabled":void 0===f.value,"mark-as-invalid-input":L.value,"selectable-values":E},null,8,["modelValue","is-disabled","mark-as-invalid-input"])])]),(0,n.Lk)("div",Ii,[(0,n.Lk)("div",Fi,[xi,Si,(0,n.bF)(Da,{modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=e=>k.value=e),class:"edit-episode__bg m-radius-1 m-border m-border-hover m-border-active",placeholder:"Выберите переводчика",values:(0,s.R1)(g).map((e=>e.Name)),"is-dropped":C.value,"call-updater-delay":500,"onChange:input":W},null,8,["modelValue","values","is-dropped"]),(0,n.bF)(ge,{modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=e=>V.value=e),class:"edit-episode__bg m-radius-1 m-border m-border-hover m-border-active",title:"Выберите качество","selectable-values":[(0,s.R1)(bi)["720p"].toString(),(0,s.R1)(bi)["1080p"].toString(),(0,s.R1)(bi)["1440p"].toString(),(0,s.R1)(bi)["2160p"].toString()]},null,8,["modelValue","selectable-values"])])]),(0,n.Lk)("div",Ai,[(0,n.Lk)("div",Mi,[ji,(0,n.bF)(wo,{modelValue:S.value,"onUpdate:modelValue":t[5]||(t[5]=e=>S.value=e),class:"edit-episode__video-input edit-episode__bg m-radius-1 m-border m-border-hover m-border-active",placeholder:"Вставьте скрип-видео","mark-as-invalid-input":A.value},null,8,["modelValue","mark-as-invalid-input"]),(0,n.Lk)("div",Ki,[(0,n.Lk)("iframe",{width:"100%",height:"100%",class:"edit-episode__video m-radius-1",allowfullscreen:"allowfullscreen",src:x.value},null,8,Ti),Bi]),(0,n.bF)(h,{variant:"outline",class:"material m-border m-border-hover m-radius-1",onClick:M},{default:(0,n.k6)((()=>[(0,n.eW)(" Вывести видео ")])),_:1})])]),(0,n.Lk)("div",Wi,[(0,n.bF)(h,{class:"m-radius-circle",variant:"filled",onClick:T},{default:(0,n.k6)((()=>[(0,n.eW)(" Отправить ")])),_:1}),(0,n.bF)(h,{variant:"outline",class:"m-border m-border-hover m-radius-circle"},{default:(0,n.k6)((()=>[(0,n.eW)(" Сбросить ")])),_:1})])]))}});const Ni=(0,k.A)(Xi,[["__scopeId","data-v-7f0f78b2"]]);var Di=Ni;const Hi={Content:"Content",Episode:"Episode"},Oi={Unspecified:"Unspecified",ById:"ById",ByName:"ByName",ByCreated:"ByCreated",ByCreatedDescending:"ByCreatedDescending"},Gi={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qi=(0,n.Lk)("path",{d:"M6.75012 12.1274L3.62262 8.99988L2.55762 10.0574L6.75012 14.2499L15.7501 5.24988L14.6926 4.19238L6.75012 12.1274Z",fill:"currentColor"},null,-1),Ui=[Qi];function qi(e,t){return(0,n.uX)(),(0,n.CE)("svg",Gi,Ui)}const Pi={},Zi=(0,k.A)(Pi,[["render",qi]]);var $i=Zi;const zi={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Yi=(0,n.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 3C7.3425 3 6 4.3425 6 6C6 7.6575 7.3425 9 9 9C10.6575 9 12 7.6575 12 6C12 4.3425 10.6575 3 9 3ZM10.5 6C10.5 5.175 9.825 4.5 9 4.5C8.175 4.5 7.5 5.175 7.5 6C7.5 6.825 8.175 7.5 9 7.5C9.825 7.5 10.5 6.825 10.5 6ZM13.5 12.75C13.35 12.2175 11.025 11.25 9 11.25C6.975 11.25 4.65 12.2175 4.5 12.7575V13.5H13.5V12.75ZM3 12.75C3 10.755 6.9975 9.75 9 9.75C11.0025 9.75 15 10.755 15 12.75V15H3V12.75Z",fill:"black"},null,-1),Ji=[Yi];function eu(e,t){return(0,n.uX)(),(0,n.CE)("svg",zi,Ji)}const tu={},au=(0,k.A)(tu,[["render",eu]]);var lu=au;const nu={class:"material edit-list__main"},su={class:"edit-list__filters gap-8"},ru={class:"edit-list__header dynamic"},ou={class:"title-large"},iu={class:"row gap-26"},uu={key:0,class:"edit-list__image-box"},du=["src"],cu=["src"],vu={class:"edit-list__body"},pu={class:"edit-list__field-name body-large"},mu={class:"row gap-8"},_u={key:0,class:"body-medium edit-list__field-comparison--old"},bu={class:"body-medium edit-list__field-comparison--new"},gu={key:2,class:"edit-list__footer h__space-between v__center"},hu={class:"row gap-16",style:{width:"100%"}},fu=5;var yu=(0,n.pM)({__name:"EditListComponent",setup(e){const t=(0,n.WQ)("image-service"),o=(0,n.WQ)("changes-history-service"),i=(0,n.WQ)("content-service"),u=at(),d=(0,je.rd)(),c=U(),v=(0,s.KR)([]),p={contentIds:(0,s.KR)([]),search:(0,s.KR)(null),orderBy:(0,s.KR)("По умолчанию"),historyType:(0,s.KR)(""),status:(0,s.KR)(""),isMy:(0,s.KR)(null)},m=(0,s.KR)(!1),_=(0,s.KR)(),b=(0,s.KR)(!1);let g=0;async function f(e=0){m.value=!1,e<0&&g+e<=0?g=0:g+=e;const t=await o.getChangesComparisons({Approved:y(p.status.value),CreatedByIds:p.isMy.value&&c.loggedIn?[c.userId]:[],HistoryTypes:k(p.historyType.value),OrderBy:C(p.orderBy.value),Ids:[],Limit:fu,Offset:g,TargetIds:p.contentIds?.value??[]});_.value=t.data.Changes,m.value=!0}function y(e){return"По умолчанию"===e?null:"Не одобрено"!==e&&("Одобрено"===e||void 0)}function k(e){return"Серия"===e?[Hi.Episode]:"Дорама"===e?[Hi.Content]:[]}function C(e){return"Сначала старые"===e?Oi.ByCreated:"По названию"===e?Oi.ByName:"По идентификатору"===e?Oi.ById:"Сначала новые"===e?Oi.ByCreatedDescending:Oi.Unspecified}async function w(){if(c.loggedIn)return p.isMy.value=!p.isMy.value,void await f(0);u.push("Сначала необходимо авторизоваться!",tt.Error)}async function E(e){if(!c.loggedIn)return u.push("Для начала необходимо авторизоваться!",tt.Error),void await d.push("/login");const t=c.userId,a=_.value.find((t=>t.HistoryId===e)),l=(await o.approve(e,t)).onException((()=>u.push("Ошибка сервера! Заявка не одобрена.",tt.Error))).onBusinessError((e=>u.push(e.Message,tt.Error)));l.data&&(a.ApprovedAt=Date.now(),a.ApprovedBy=t,u.push("Успех! Одобрено!",tt.Success))}function V(e){return e.FieldsComparisons.find((e=>"Видео"===e.Name)).NewValue}async function R(e){v.value=[];const t=await i.searchBy(e);p.contentIds.value=t.Units.map((e=>e.ContentId)),await f()}async function I(e,t){const a=await i.searchBy(e);v.value=a.Units,t&&(p.contentIds.value=[v.value.find((t=>t.Title===e)).ContentId],await f()),b.value=v.value.length>0}return(0,n.sV)((async()=>{m.value=!1,await f(0),m.value=!0})),(e,o)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",nu,[(0,n.bF)(Da,{class:"edit-list__search m-radius-1 m3-bg-1 m-border m-border-active",placeholder:"Поиск",values:v.value?.map((e=>e.Title))??[],"is-dropped":b.value,"call-updater-delay":500,"onChange:input":I,"onOnkeydown:enter":R},null,8,["values","is-dropped"]),(0,n.Lk)("div",su,[(0,n.bo)((0,n.bF)(ve,{class:(0,r.C4)(["m-radius-1",{"edit-list__filters-unit--enabled":p.isMy.value}]),text:"Мои",onClick:(0,l.D$)(w,["stop"])},null,8,["class"]),[[l.aG,(0,s.R1)(c).loggedIn]]),(0,n.bF)(ge,{modelValue:p.orderBy.value,"onUpdate:modelValue":[o[0]||(o[0]=e=>p.orderBy.value=e),o[1]||(o[1]=()=>{f(0)})],class:"edit-list__filters-unit m3-bg-1 m-radius-circle m-border",title:"Сортировать по","menu-alignment":(0,s.R1)(ce).Left,"selectable-values":["По идентификатору","По названию","Сначала новые","Сначала старые"]},null,8,["modelValue","menu-alignment"]),(0,n.bF)(ge,{modelValue:p.historyType.value,"onUpdate:modelValue":[o[2]||(o[2]=e=>p.historyType.value=e),o[3]||(o[3]=()=>{f(0)})],class:"edit-list__filters-unit m3-bg-1 m-radius-circle m-border",title:"Тип","menu-alignment":(0,s.R1)(ce).Left,"selectable-values":["Все","Дорама","Серия"]},null,8,["modelValue","menu-alignment"]),(0,n.bF)(ge,{modelValue:p.status.value,"onUpdate:modelValue":[o[4]||(o[4]=e=>p.status.value=e),o[5]||(o[5]=()=>{f(0)})],class:"edit-list__filters-unit m3-bg-1 m-radius-circle m-border",title:"Статус","menu-alignment":(0,s.R1)(ce).Left,"selectable-values":["Все","Не одобрено","Одобрено"]},null,8,["modelValue","menu-alignment"])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(_.value,(e=>((0,n.uX)(),(0,n.Wv)(se,{key:e,type:2,class:"edit-list__history m-radius-28 m3-bg-1"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",ru,[(0,n.Lk)("div",null,[(0,n.Lk)("p",ou,(0,r.v_)(e.Title)+"#"+(0,r.v_)(e.HistoryId),1),(0,n.Lk)("p",null,(0,r.v_)((0,s.R1)(Gl).getDateStr(e.CreatedAt)),1)]),(0,n.Lk)("div",iu,[(0,n.bF)(ve,{class:"edit-list__author m-border m-radius-1",text:e.CreatedBy?"Автор#"+e.CreatedBy:"Система","enable-text-icon":!0},{"text-icon":(0,n.k6)((()=>[(0,n.bF)(lu)])),_:2},1032,["text"]),null!=e.ApprovedBy?((0,n.uX)(),(0,n.Wv)(ve,{key:0,class:"edit-list__approver m-border m-radius-1",text:e.ApprovedBy?"Пользователь#"+e.ApprovedBy:"Система","enable-text-icon":!0},{"text-icon":(0,n.k6)((()=>[(0,n.bF)($i)])),_:2},1032,["text"])):(0,n.Q3)("",!0)])]),e.HistoryType===(0,s.R1)(Hi).Content?((0,n.uX)(),(0,n.CE)("div",uu,[(0,n.Lk)("img",{class:"edit-list__content-image m-radius-2",src:(0,s.R1)(t).getImageLink(e.ImageId,null===e.TargetId||0===e.TargetId?e.HistoryId:e.TargetId),alt:"Изображение контента",onError:o[6]||(o[6]=e=>e.target.src=a(1133))},null,40,du)])):e.HistoryType===(0,s.R1)(Hi).Episode?((0,n.uX)(),(0,n.CE)("iframe",{key:1,class:"edit-list__image-box",src:V(e),frameborder:"0",allow:"autoplay; encrypted-media; fullscreen; picture-in-picture",allowfullscreen:""},null,8,cu)):(0,n.Q3)("",!0),(0,n.Lk)("div",vu,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.FieldsComparisons,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"edit-list__field-comparison"},[(0,n.Lk)("div",pu,(0,r.v_)(e.Name),1),(0,n.Lk)("div",mu,[e.OldValue?((0,n.uX)(),(0,n.CE)("span",_u,(0,r.v_)(e.OldValue),1)):(0,n.Q3)("",!0),(0,n.Lk)("span",bu,(0,r.v_)(e.NewValue),1)])])))),128))]),null===e.ApprovedBy?((0,n.uX)(),(0,n.CE)("div",gu,[(0,n.Lk)("a",null,[(0,n.bF)(h,{variant:"filled",class:"material m-radius-circle body-large edit-list__icon",onClick:t=>E(e.HistoryId)},{default:(0,n.k6)((()=>[(0,n.eW)(" Одобрить ")])),_:2},1032,["onClick"])])])):(0,n.Q3)("",!0)])),_:2},1024)))),128)),(0,n.Lk)("div",hu,[0!==(0,s.R1)(g)?((0,n.uX)(),(0,n.Wv)(L,{key:0,class:"edit-list__paging-button title-medium m3-bg-1 m-radius-28 gap-8",onClick:o[7]||(o[7]=e=>f(-10))},{default:(0,n.k6)((()=>[(0,n.bF)(sr),(0,n.eW)(" Предыдущая страница ")])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(L,{class:"edit-list__paging-button title-medium m3-bg-1 m-radius-28 gap-8",onClick:o[8]||(o[8]=e=>f(5))},{default:(0,n.k6)((()=>[(0,n.eW)(" Следующая страница "),(0,n.bF)(vr)])),_:1})])],512)),[[l.aG,m.value]])}});const ku=(0,k.A)(yu,[["__scopeId","data-v-03510552"]]);var Cu=ku;const wu={class:"edit__box"};var Lu=(0,n.pM)({__name:"EditsView",setup(e){const t=(0,je.lq)(),a=(0,s.KR)(null),l=(0,s.KR)(null);a.value=+t.params.content,l.value=+t.params.episode;const r=(0,s.KR)(o());function o(){return t.fullPath.includes("content")?Ar.CreateContent:t.fullPath.includes("episode")?Ar.CreateEpisode:(t.fullPath.includes("list"),Ar.Edits)}return(0,n.wB)((()=>t.fullPath),(()=>{r.value=o()})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",wu,[(0,n.bF)(oo,{class:"col",current:r.value},null,8,["current"]),r.value===(0,s.R1)(Ar).Edits?((0,n.uX)(),(0,n.Wv)(Cu,{key:0})):(0,n.Q3)("",!0),r.value===(0,s.R1)(Ar).CreateContent?((0,n.uX)(),(0,n.Wv)(pi,{key:1,"content-id":a.value},null,8,["content-id"])):(0,n.Q3)("",!0),r.value===(0,s.R1)(Ar).CreateEpisode?((0,n.uX)(),(0,n.Wv)(Di,{key:2,"content-id":a.value,"episode-id":l.value},null,8,["content-id","episode-id"])):(0,n.Q3)("",!0)]))}});const Eu=(0,k.A)(Lu,[["__scopeId","data-v-51ebdf25"]]);var Vu=Eu;const Ru={class:"column gap-16"},Iu={class:"row gap-16 v__start h__space-between"},Fu=(0,n.Lk)("div",null,null,-1),xu=(0,n.Lk)("p",{class:"title-large"},[(0,n.eW)(" Шаг 1. Подтверждение адреса"),(0,n.Lk)("br"),(0,n.eW)("электронной почты ")],-1),Su={class:"body-medium"},Au=(0,n.Lk)("br",null,null,-1),Mu={class:"column gap-16"},ju={class:"row gap-16 v__start v__center h__space-between"},Ku=(0,n.Lk)("p",{class:"title-large"}," Шаг 2. Введите код ",-1),Tu=(0,n.Lk)("p",{class:"body-medium"},[(0,n.eW)(" Проверьте электронную почту,"),(0,n.Lk)("br"),(0,n.eW)("мы отправили вам код подтверждения ")],-1),Bu={class:"column gap-8"},Wu={class:"column gap-16"},Xu={class:"row gap-16 v__start h__space-between"},Nu=(0,n.Lk)("p",{class:"title-large"},[(0,n.eW)(" Шаг 3. Введите адрес новой"),(0,n.Lk)("br"),(0,n.eW)("электронной почты ")],-1),Du=(0,n.Lk)("p",{class:"body-medium"},[(0,n.eW)(" Подтвердите свой новый адрес электронной"),(0,n.Lk)("br"),(0,n.eW)("почты чтобы его сохранить ")],-1),Hu={class:"column gap-8"},Ou={class:"column gap-16"},Gu={class:"row gap-16 v__start v__center h__space-between"},Qu=(0,n.Lk)("p",{class:"title-large"},[(0,n.eW)(" Шаг 4. Подтверждение нового адреса"),(0,n.Lk)("br"),(0,n.eW)("электронной почты ")],-1),Uu=(0,n.Lk)("p",{class:"body-medium"},[(0,n.eW)(" Проверьте электронную почту,"),(0,n.Lk)("br"),(0,n.eW)("мы отправили вам код подтверждения ")],-1),qu={class:"column gap-8"};var Pu;(function(e){e[e["SendMailCode"]=1]="SendMailCode",e[e["CodeInput"]=2]="CodeInput",e[e["NewEmailInput"]=3]="NewEmailInput",e[e["NewMailCodeInput"]=4]="NewMailCodeInput"})(Pu||(Pu={}));var Zu=(0,n.pM)({__name:"EmailChangeModal",props:{currentEmail:{type:String,required:!0},isVisible:{type:Boolean,required:!0}},emits:["on:close"],setup(e,{emit:t}){const a=(0,je.rd)(),o=at(),i=U(),u=(0,n.WQ)("user-api");(0,n.sV)((async()=>{i.loggedIn||(o.push("Сначала необходимо авторизоваться!",tt.Error),await a.push("/login"))}));const d=t,c=e,v=i.email,p=(0,s.KR)(Pu.SendMailCode),m=(0,s.KR)(c.isVisible),_=(0,s.KR)(),b=(0,s.KR)(!1),g=(0,s.KR)(),f=(0,s.KR)(!1),y=(0,s.KR)(),k=(0,s.KR)(!1);let C=null;async function w(){const e=(await u.SendUpdateMailCode()).onException((()=>o.push("Что-то пошло не так! Ошибка сервера!",tt.Error))).onBusinessError((()=>o.push("Сначала необходимо авторизоваться!",tt.Error)));e.error||(p.value=Pu.CodeInput)}async function L(){if(Gl.isNullOrEmpty(_.value))return void(b.value=!0);const e=(await u.VerifyOldMailCode(_.value)).onException((()=>o.push("Что-то пошло не так! Ошибка сервера!",tt.Error))).onBusinessError((e=>o.push(e.ErrorCode,tt.Error)));e.error?b.value=!0:(C=e.data.Token,b.value=!1,p.value=Pu.NewEmailInput)}async function E(){if(!Gl.validateEmail(g.value))return void(f.value=!0);const e=(await u.SendNewMailCode(g.value,C)).onException((()=>o.push("Что-то пошло не так! Ошибка сервера!",tt.Error))).onBusinessError((e=>o.push(e.ErrorCode,tt.Error)));e.error?f.value=!0:(f.value=!1,p.value=Pu.NewMailCodeInput)}async function V(){if(Gl.isNullOrEmpty(y.value))return void(k.value=!1);const e=(await u.VerifyNewMailCode(g.value,y.value,C)).onException((()=>o.push("Что-то пошло не так! Ошибка сервера!",tt.Error))).onBusinessError((e=>o.push(e.ErrorCode,tt.Error)));e.error?k.value=!1:(k.value=!0,i.UpdateEmail(g.value),d("on:close"))}function R(){m.value=!1,d("on:close")}return(0,n.wB)((()=>c.isVisible),(e=>{m.value=e})),(e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bo)((0,n.bF)(hn,{"onOn:close":R},{header:(0,n.k6)((()=>[(0,n.Lk)("div",Ru,[(0,n.Lk)("div",Iu,[Fu,xu,(0,n.bF)(xa,{onClick:R},{default:(0,n.k6)((()=>[(0,n.bF)(Ba)])),_:1})]),(0,n.Lk)("p",Su,[(0,n.eW)(" Подтвердите свой прошлый адрес электронной почты"),Au,(0,n.eW)("("+(0,r.v_)((0,s.R1)(v))+"), чтобы его изменить ",1)])])])),footer:(0,n.k6)((()=>[(0,n.bF)(h,{variant:"filled",class:"m-radius-8",onClick:w},{default:(0,n.k6)((()=>[(0,n.eW)(" Отправить код подтверждения ")])),_:1})])),_:1},512),[[l.aG,p.value===Pu.SendMailCode&&m.value]]),(0,n.bo)((0,n.bF)(hn,{"onOn:close":R},{header:(0,n.k6)((()=>[(0,n.Lk)("div",Mu,[(0,n.Lk)("div",ju,[(0,n.bF)(xa,null,{default:(0,n.k6)((()=>[(0,n.bF)(sr)])),_:1}),Ku,(0,n.bF)(xa,{onClick:R},{default:(0,n.k6)((()=>[(0,n.bF)(Ba)])),_:1})]),Tu])])),body:(0,n.k6)((()=>[(0,n.bF)(ga,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),class:"m-radius-8 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":b.value,"place-holder":"Код подтверждения"},null,8,["modelValue","mark-as-invalid-input"])])),footer:(0,n.k6)((()=>[(0,n.Lk)("div",Bu,[(0,n.bF)(h,{variant:"filled",class:"m-radius-8",onClick:L},{default:(0,n.k6)((()=>[(0,n.eW)(" Подтвердить ")])),_:1}),(0,n.bF)(h,{variant:"outline",class:"m-radius-8"},{default:(0,n.k6)((()=>[(0,n.eW)(" Отправить еще раз ")])),_:1})])])),_:1},512),[[l.aG,p.value===Pu.CodeInput&&m.value]]),(0,n.bo)((0,n.bF)(hn,{"onOn:close":R},{header:(0,n.k6)((()=>[(0,n.Lk)("div",Wu,[(0,n.Lk)("div",Xu,[Nu,(0,n.bF)(xa,{onClick:R},{default:(0,n.k6)((()=>[(0,n.bF)(Ba)])),_:1})]),Du])])),body:(0,n.k6)((()=>[(0,n.bF)(ga,{modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),class:"m-radius-8 m3-bg-2 m-border m-border-hover m-border-active","mark-as-invalid-input":f.value,"place-holder":"Введите новую почту"},null,8,["modelValue","mark-as-invalid-input"])])),footer:(0,n.k6)((()=>[(0,n.Lk)("div",Hu,[(0,n.bF)(h,{variant:"filled",class:"m-radius-8",onClick:E},{default:(0,n.k6)((()=>[(0,n.eW)(" Отправить ")])),_:1})])])),_:1},512),[[l.aG,p.value===Pu.NewEmailInput&&m.value]]),(0,n.bo)((0,n.bF)(hn,{"onOn:close":R},{header:(0,n.k6)((()=>[(0,n.Lk)("div",Ou,[(0,n.Lk)("div",Gu,[Qu,(0,n.bF)(xa,{onClick:R},{default:(0,n.k6)((()=>[(0,n.bF)(Ba)])),_:1})]),Uu])])),body:(0,n.k6)((()=>[(0,n.bF)(ga,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=e=>y.value=e),class:"m-radius-8 m3-bg-2 m-border m-border-hover m-border-active","place-holder":"Код подтверждения","mark-as-invalid-input":k.value},null,8,["modelValue","mark-as-invalid-input"])])),footer:(0,n.k6)((()=>[(0,n.Lk)("div",qu,[(0,n.bF)(h,{variant:"filled",class:"m-radius-8",onClick:V},{default:(0,n.k6)((()=>[(0,n.eW)(" Подтвердить ")])),_:1}),(0,n.bF)(h,{variant:"outline",class:"m-radius-8"},{default:(0,n.k6)((()=>[(0,n.eW)(" Отправить еще раз ")])),_:1})])])),_:1},512),[[l.aG,p.value===Pu.NewMailCodeInput&&m.value]])],64))}});const $u=Zu;var zu=$u;const Yu={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ju=(0,n.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 12C2 6.48 6.48 2 12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12ZM10 14.17L16.59 7.58L18 9L10 17L6 13L7.41 11.59L10 14.17Z",fill:"currentColor"},null,-1),ed=[Ju];function td(e,t){return(0,n.uX)(),(0,n.CE)("svg",Yu,ed)}const ad={},ld=(0,k.A)(ad,[["render",td]]);var nd=ld;const sd={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},rd=(0,n.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM11 17V15H13V17H11ZM11 7V13H13V7H11Z",fill:"currentColor"},null,-1),od=[rd];function id(e,t){return(0,n.uX)(),(0,n.CE)("svg",sd,od)}const ud={},dd=(0,k.A)(ud,[["render",id]]);var cd=dd;const vd=e=>((0,n.Qi)("data-v-44c885aa"),e=e(),(0,n.jt)(),e),pd={class:"settings__main m-border m-radius-8 gap-16 padding-16 h__fill fit-content"},md={class:"settings__avatar column gap-8 fit-content"},_d=vd((()=>(0,n.Lk)("p",{class:"label-medium fit-content text__one-line"}," Аватар ",-1))),bd={class:"column gap-16 h__fill"},gd={class:"column h__fill v__start gap-8"},hd=vd((()=>(0,n.Lk)("p",{class:"label-medium text__one-line"}," Отображаемое имя ",-1))),fd={class:"row fill h__space-between v__center gap-16"},yd={key:0,class:"row gap-8"},kd=vd((()=>(0,n.Lk)("p",{style:{color:"darkgreen"},class:"row body-medium text__one-line text__center"}," Никнейм свободен! ",-1))),Cd={class:"settings__icon"},wd={key:1,class:"row gap-8"},Ld=vd((()=>(0,n.Lk)("p",{style:{color:"var(--error-light)"},class:"row body-medium text__one-line text__center"}," Никнейм занят ",-1))),Ed={class:"settings__icon"},Vd={class:"column h__fill v__start gap-8"},Rd=vd((()=>(0,n.Lk)("p",{class:"label-medium text__one-line"}," Электронная почта ",-1))),Id={class:"row fill h__space-between v__center gap-16"},Fd={class:"row gap-16"};var xd=(0,n.pM)({__name:"SettingsView",setup(e){const t=U(),a=at(),l=(0,n.WQ)("user-api"),o=(0,s.KR)(t.nickname),i=(0,s.KR)(!1),u=(0,s.KR)(null);let d=null;const c=(0,s.KR)(!1);async function v(){if(Gl.isNullOrEmpty(o.value))return u.value=!1,void(i.value=!1);(await l.UpdateNickname(o.value,i.value)).onException((()=>a.push("Что-то пошло не так! Ошибка сервера!",tt.Error))).onBusinessError((e=>{"NicknameAlreadyExists"===e.ErrorCode?(u.value=!1,i.value=!1):"CallWithoutForceFlag"===e.ErrorCode?(i.value=!0,u.value=!0):a.push(e.Message,tt.Error)})),i.value&&(t.UpdateNickname(o.value),u.value=null,a.push("Успех! Новый никнейм сохранен!",tt.Success))}function p(){clearTimeout(d),d=setTimeout((async()=>{i.value=!1,u.value=void 0,await v()}),300)}return(0,n.xo)((()=>{clearTimeout(d)})),(e,a)=>((0,n.uX)(),(0,n.Wv)(se,{class:"padding-16 fit-content",type:2},{default:(0,n.k6)((()=>[(0,n.Lk)("div",pd,[(0,n.Lk)("div",md,[_d,(0,n.bF)(bl,{style:{overflow:"hidden"},class:"fill m-border m-radius-8 m-radius-8",src:(0,s.R1)(t).imageUrl},null,8,["src"])]),(0,n.Lk)("div",bd,[(0,n.Lk)("div",gd,[hd,(0,n.Lk)("div",fd,[(0,n.bF)(ga,{modelValue:o.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>o.value=e),a[1]||(a[1]=()=>{p()})],class:(0,r.C4)(["column m-border m-border-hover m-border-active m-radius-8 fit-content m3-bg-2",{"settings__input-valid":u.value,"settings__input-invalid":!1===u.value}]),"place-holder":"Введите имя",maxlength:"20","input-validator":e=>(0,s.R1)(Gl).validateNickname(e)},{"end-icon":(0,n.k6)((()=>[!0===u.value?((0,n.uX)(),(0,n.CE)("div",yd,[kd,(0,n.Lk)("div",Cd,[(0,n.bF)(nd,{style:{color:"darkgreen"}})])])):(0,n.Q3)("",!0),!1===u.value?((0,n.uX)(),(0,n.CE)("div",wd,[Ld,(0,n.Lk)("div",Ed,[(0,n.bF)(cd,{style:{color:"var(--error-light)"}})])])):(0,n.Q3)("",!0)])),_:1},8,["modelValue","class","input-validator"]),(0,n.bF)(h,{class:(0,r.C4)([{"settings__input-valid":u.value},"m-radius-circle"]),variant:"filled",onClick:v},{default:(0,n.k6)((()=>[(0,n.eW)(" Сохранить ")])),_:1},8,["class"])])]),(0,n.Lk)("div",Vd,[Rd,(0,n.Lk)("div",Id,[(0,n.bF)(ga,{modelValue:(0,s.R1)(t).email,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,s.R1)(t).email=e),class:"column m-border m-radius-8 fit-content m3-bg-2",disabled:!0},null,8,["modelValue"]),(0,n.bF)(h,{class:"m-radius-circle",variant:"filled",onClick:a[3]||(a[3]=()=>{c.value=!0})},{default:(0,n.k6)((()=>[(0,n.eW)(" Изменить ")])),_:1}),c.value?((0,n.uX)(),(0,n.Wv)(zu,{key:0,"current-email":(0,s.R1)(t).email,"is-visible":c.value,"onOn:close":a[4]||(a[4]=()=>c.value=!1)},null,8,["current-email","is-visible"])):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Fd,[(0,n.bF)(h,{class:"m-border m-radius-circle fit-content",variant:"filled"},{default:(0,n.k6)((()=>[(0,n.eW)(" Сменить пароль ")])),_:1}),(0,n.bF)(h,{class:"m-border m-radius-circle fit-content",variant:"outline"},{default:(0,n.k6)((()=>[(0,n.eW)(" Удалить аккаунт ")])),_:1})])])])])),_:1}))}});const Sd=(0,k.A)(xd,[["__scopeId","data-v-44c885aa"]]);var Ad=Sd;const Md=[{path:"/",name:"main",component:aa},{path:"/search",name:"Поиск",component:$a},{path:"/profile",name:"Профиль",component:Ol},{path:"/settings",name:"Настройки",component:Ad},{path:"/login",name:"Вход",component:_n},{path:"/reg",name:"Регистрация",component:Kn},{path:"/restore",name:"Восстановление пароля",component:Ys},{name:"theater",path:"/theater/:id",component:Ns},{name:"episode",path:"/episode/:content/:episode/:translation(\\d+)*",component:Mr},{name:"edit",path:"/edit",component:Vu,children:[{name:"edit-list",path:"/edit/list",component:Vu},{name:"edit-content",path:"/edit/content/:content(\\d+)",component:Vu},{name:"create-content",path:"/edit/content",component:Vu},{name:"edit-episode",path:"/edit/episode/:content(\\d+)/:episode(\\d+)",component:Vu},{name:"edit-episode",path:"/edit/episode/:content(\\d+)",component:Vu},{name:"create-episode",path:"/edit/episode",component:Vu}]}],jd=(0,je.aE)({history:(0,je.LA)("/"),routes:Md,linkActiveClass:"",linkExactActiveClass:""});var Kd=jd;const Td=(0,Q.Ey)();(0,l.Ef)(_t).use(Td).use(Kd).mount("#app")},1133:function(e,t,a){"use strict";e.exports=a.p+"img/DefaultImage.eee8fea2.png"}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var s=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){var e=[];a.O=function(t,l,n,s){if(!l){var r=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],s=e[d][2];for(var o=!0,i=0;i<l.length;i++)(!1&s||r>=s)&&Object.keys(a.O).every((function(e){return a.O[e](l[i])}))?l.splice(i--,1):(o=!1,s<r&&(r=s));if(o){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,n,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,s,r=l[0],o=l[1],i=l[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(i)var d=i(a)}for(t&&t(l);u<r.length;u++)s=r[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},l=self["webpackChunkkapace_testing"]=self["webpackChunkkapace_testing"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(8985)}));l=a.O(l)})();
//# sourceMappingURL=app.cdf0bb2d.js.map